[
    {
        "id": "3c3a2ad2.f07166",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 197.00390625,
        "y": 119.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "74ad4fbc.157c"
            ]
        ]
    },
    {
        "id": "74ad4fbc.157c",
        "type": "method",
        "name": "method getStatus",
        "xml": "<method rpc='getStatus' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 258.00390625,
        "y": 239.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "c0d4359e.2a6258"
            ]
        ]
    },
    {
        "id": "7a8ce664.bcc1c8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Get status of Policy Instance  associated with Near RT RIC ID and Policy Type ID\"/>\n<parameter name=\"field2\" value=\"`$get-status-input.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$get-status-input.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$get-status-input.policy-instance-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 722.00390625,
        "y": 54.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "c0d4359e.2a6258",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 463.00390625,
        "y": 193.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "7a8ce664.bcc1c8",
                "dc6fba67.8ffaa8",
                "37a3fd8a.4c4282",
                "a8ad4a87.1a43b8",
                "1adcc935.c5c347"
            ]
        ]
    },
    {
        "id": "2f0dcd2b.7b79c2",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 130.00390625,
        "y": 55.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "3c3a2ad2.f07166"
            ]
        ]
    },
    {
        "id": "dc6fba67.8ffaa8",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='getStatus executed successfully' />",
        "comments": "",
        "x": 762.0039520263672,
        "y": 108.00390720367432,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "37a3fd8a.4c4282",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 762.00390625,
        "y": 161.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "a8ad4a87.1a43b8",
        "type": "switchNode",
        "name": "A1 Mediator Deployed",
        "xml": "<switch test='`$prop.ric-plt-A1Mediator-deployed`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 712.00390625,
        "y": 217.00390625,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "f7c78ac8.3c1058",
                "c469f2b7.09aa3"
            ]
        ]
    },
    {
        "id": "c469f2b7.09aa3",
        "type": "outcome",
        "name": "Deployed",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 996.0039520263672,
        "y": 77.00397157669067,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "57b7da77.8ef044"
            ]
        ]
    },
    {
        "id": "57b7da77.8ef044",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 973.0040016174316,
        "y": 223.00392389297485,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "6b5593ee.2a34bc"
            ]
        ]
    },
    {
        "id": "f7c78ac8.3c1058",
        "type": "outcome",
        "name": "Not Deployed",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 949.0039749145508,
        "y": 512.0039677619934,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "c641e0cc.9d7f"
            ]
        ]
    },
    {
        "id": "c641e0cc.9d7f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1164.0040130615234,
        "y": 641.0039205551147,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "5bdef8d5.553548",
                "15cefea7.d2def1",
                "6dfd6f84.cc9c8"
            ]
        ]
    },
    {
        "id": "5bdef8d5.553548",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error in getting status for A1 Policy Instance. Aborting\" />",
        "comments": "",
        "x": 1294.0038299560547,
        "y": 722.0039048194885,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "6b5593ee.2a34bc",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1167.0040130615234,
        "y": 334.00391072034836,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "c2d8e6b5.f504d8",
                "f356d787.c7f2e8",
                "c564e7c.a479218",
                "655080be.208e2",
                "4e461392.18bdfc",
                "6030c496.ec537c"
            ]
        ]
    },
    {
        "id": "f356d787.c7f2e8",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$get-status-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.policy-type-id\" value=\"`$get-status-input.policy-type-id`\"/>\n<parameter name=\"tmp.policy-instance-id\" value=\"`$get-status-input.policy-instance-id`\"/>\n",
        "comments": "",
        "x": 1505.00537109375,
        "y": 131.8930368423462,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "c2d8e6b5.f504d8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Getting status for Policy Instance.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.policy-instance-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1426.0040016174316,
        "y": 185.00390911102295,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "c564e7c.a479218",
        "type": "execute",
        "name": "Get status for Policy Instance",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.a1Mediator.url + '/' + $tmp.restapi.policyinstance-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"GET\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"false\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1444.0045166015625,
        "y": 388.0143041610718,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "ccced85.7777228",
                "f2c317e4.c0a588"
            ]
        ]
    },
    {
        "id": "ccced85.7777228",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1420.0039367675781,
        "y": 485.00401973724365,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "e3a55242.ba0f8"
            ]
        ]
    },
    {
        "id": "f2c317e4.c0a588",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1664.0041809082031,
        "y": 356.0039281845093,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "58943e05.6cd2c"
            ]
        ]
    },
    {
        "id": "68c4a72e.2d8038",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error in Getting status for A1 Policy Instance. Aborting\" />",
        "comments": "",
        "x": 1580.0045166015625,
        "y": 592.0039892196655,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "58943e05.6cd2c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1814.0037860870361,
        "y": 320.00395822525024,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "1e2eb507.6b9d3b"
            ]
        ]
    },
    {
        "id": "1e2eb507.6b9d3b",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Status of A1 Policy Instance \"/>\n<parameter name=\"field2\" value=\"`$a1MediatorRsp`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1994.0039100646973,
        "y": 294.00390911102295,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "15cefea7.d2def1",
        "type": "block",
        "name": "DMAAP Reponse Publish",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1950.0040283203125,
        "y": 689.0040578842163,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "c4c2287c.45f668",
                "ef09f7c9.e46938",
                "ea077f87.6cf36"
            ]
        ]
    },
    {
        "id": "ef09f7c9.e46938",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n    <parameter name='restapiUrl' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name='responsePrefix' value='dmaap' />",
        "comments": "",
        "outputs": 1,
        "x": 2299.0042266845703,
        "y": 867.0034625530243,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "56d4b2fa.e81c7c",
                "4e9872e.f9bfd8c"
            ]
        ]
    },
    {
        "id": "c4c2287c.45f668",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='tmp.a1-adapter-api.rpc-name' value='getStatus'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-code' value='`$response-code`'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-value' value='`$response-message`'/>\n<parameter name='tmp.a1Policy-dmaap-resp.payload' value=\"Working On it\" />",
        "comments": "",
        "x": 2288.670944213867,
        "y": 658.0040187835693,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "56d4b2fa.e81c7c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2514.5041122436523,
        "y": 789.9207663536072,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "5d41321f.9b1c6c"
            ]
        ]
    },
    {
        "id": "4e9872e.f9bfd8c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2518.5040321350098,
        "y": 928.920608997345,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "6c4b1d08.1e7724"
            ]
        ]
    },
    {
        "id": "5d41321f.9b1c6c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2674.5039463043213,
        "y": 791.9207673072815,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "b2cf39d7.1c7108"
            ]
        ]
    },
    {
        "id": "b2cf39d7.1c7108",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error publishing DMAAP A1 Policy Response message. \" />",
        "comments": "",
        "x": 2856.503677368164,
        "y": 782.9208431243896,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "6c4b1d08.1e7724",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2701.5036754608154,
        "y": 921.920717716217,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "45e70b37.809a64"
            ]
        ]
    },
    {
        "id": "45e70b37.809a64",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"DMAAP A1Policy message Successfully Published \"/>",
        "comments": "",
        "outputs": 1,
        "x": 2887.5038299560547,
        "y": 909.9210414886475,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "ea077f87.6cf36",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Before DMAAP Event - template file name, restapiURL\"/>\n<parameter name='field3' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n<parameter name='field4' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n<parameter name='field5' value=\"Status Code and Status Value to be published\" />\n<parameter name='field6' value=\"`$tmp.a1Adapter-dmaap-resp.status-code`\" />\n<parameter name='field7' value=\"`$tmp.a1Adapter-dmaap-resp.status-value`\" />\n<parameter name='field8' value=\"A1 Adapter DMAAP Response Payload\" />\n<parameter name='field9' value=\"`$tmp.a1Policy-dmaap-resp.payload`\" />\n<parameter name='field10' value=\"RPC Name\" />\n<parameter name='field11' value=\"`$tmp.a1-adapter-api.rpc-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2297.504165649414,
        "y": 749.4589986801147,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "6dfd6f84.cc9c8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Deployed'/>\n",
        "comments": "",
        "x": 1344.0041160583496,
        "y": 575.0038986206055,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "ed51b6d5.6a78a8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='Seems A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1739.757869720459,
        "y": 421.00780391693115,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "1adcc935.c5c347",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 705.7578010559082,
        "y": 831.0078420639038,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "d837205f.9c11d",
                "15cefea7.d2def1"
            ]
        ]
    },
    {
        "id": "d837205f.9c11d",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='getStatus executed successfully'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 860.7578887939453,
        "y": 915.0078468322754,
        "z": "9552257b.e12f18",
        "wires": []
    },
    {
        "id": "e3a55242.ba0f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1566.0077781677246,
        "y": 488.0078344345093,
        "z": "9552257b.e12f18",
        "wires": [
            [
                "ed51b6d5.6a78a8",
                "15cefea7.d2def1",
                "68c4a72e.2d8038"
            ]
        ]
    },
    {
        "id": "655080be.208e2",
        "type": "execute",
        "name": "generate A1 Mediator URL 1",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.policystatus`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policyinstance-url\"/>\n    <parameter name=\"target\" value=\"{policy_type_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-type-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1502.0044250488281,
        "y": 233.00390911102295,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "4e461392.18bdfc",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter getting status for Policy Instance.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.policy-instance-id`\"/>\n<parameter name=\"field5\" value=\"`$tmp.restapi.policyinstance-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1442.0046348571777,
        "y": 324.88250637054443,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    },
    {
        "id": "6030c496.ec537c",
        "type": "execute",
        "name": "generate A1 Mediator URL 2",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.restapi.policyinstance-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policyinstance-url\"/>\n    <parameter name=\"target\" value=\"{policy_instance_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1501.2538757324219,
        "y": 283.00391244888306,
        "z": "9552257b.e12f18",
        "wires": [
            []
        ]
    }
]