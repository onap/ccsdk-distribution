[
    {
        "id": "71057082.a243e",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 185.00390625,
        "y": 111.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "19afdfe5.38b64"
            ]
        ]
    },
    {
        "id": "19afdfe5.38b64",
        "type": "method",
        "name": "method getPolicyInstance",
        "xml": "<method rpc='getPolicyInstance' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 246.00390625,
        "y": 231.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "37f244a6.0ab56c"
            ]
        ]
    },
    {
        "id": "7cfcfa29.2fc534",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Get Policy Instance details associated with Near RT RIC ID and Policy Type ID\"/>\n<parameter name=\"field2\" value=\"`$get-policy-instance-input.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$get-policy-instance-input.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$get-policy-instance-input.policy-instance-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 710.00390625,
        "y": 46.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "37f244a6.0ab56c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 451.00390625,
        "y": 185.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "7cfcfa29.2fc534",
                "5f6ae6c2.664f58",
                "91b2618d.b3e64",
                "ff11fc63.9326c",
                "857216e8.e8f328"
            ]
        ]
    },
    {
        "id": "87a6087.e17c9f8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 118.00390625,
        "y": 47.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "71057082.a243e"
            ]
        ]
    },
    {
        "id": "5f6ae6c2.664f58",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='getPolicyInstance executed successfully' />",
        "comments": "",
        "x": 750.0039520263672,
        "y": 100.00390720367432,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "91b2618d.b3e64",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 750.00390625,
        "y": 153.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "ff11fc63.9326c",
        "type": "switchNode",
        "name": "A1 Mediator Deployed",
        "xml": "<switch test='`$prop.ric-plt-A1Mediator-deployed`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 700.00390625,
        "y": 209.00390625,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "eb95df55.02d21",
                "e95fa510.0ebf68"
            ]
        ]
    },
    {
        "id": "e95fa510.0ebf68",
        "type": "outcome",
        "name": "Deployed",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 984.0039520263672,
        "y": 69.00397157669067,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "a8bd697e.3db8a8"
            ]
        ]
    },
    {
        "id": "a8bd697e.3db8a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 961.0040016174316,
        "y": 215.00392389297485,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "2cf579fc.444f26"
            ]
        ]
    },
    {
        "id": "eb95df55.02d21",
        "type": "outcome",
        "name": "Not Deployed",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 937.0039749145508,
        "y": 504.0039677619934,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "f9cc4575.cfd998"
            ]
        ]
    },
    {
        "id": "f9cc4575.cfd998",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1152.0040130615234,
        "y": 633.0039205551147,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "2881f676.88488a",
                "a5d36c9a.4d26a",
                "3cf054c2.6c700c"
            ]
        ]
    },
    {
        "id": "2881f676.88488a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error in Getting A1 Policy Instance. Aborting\" />",
        "comments": "",
        "x": 1282.0038299560547,
        "y": 714.0039048194885,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "2cf579fc.444f26",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1155.0040130615234,
        "y": 326.00391072034836,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "ced8bdb3.3e326",
                "3bab4a80.83e436",
                "7e7b0916.928d98",
                "6419a04c.32704",
                "f3275c75.b49b7",
                "e3d7b540.043a18"
            ]
        ]
    },
    {
        "id": "3bab4a80.83e436",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$get-policy-instance-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.policy-type-id\" value=\"`$get-policy-instance-input.policy-type-id`\"/>\n<parameter name=\"tmp.policy-instance-id\" value=\"`$get-policy-instance-input.policy-instance-id`\"/>\n",
        "comments": "",
        "x": 1493.00537109375,
        "y": 123.89303684234619,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "ced8bdb3.3e326",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Get Policy Instance.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.policy-instance-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1414.0040016174316,
        "y": 177.00390911102295,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "7e7b0916.928d98",
        "type": "execute",
        "name": "Get Policy Instances",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.a1Mediator.url + '/' + $tmp.restapi.policyinstance-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"GET\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"true\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1432.0045166015625,
        "y": 380.0143041610718,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "d99d36d2.a41738",
                "d90c54fd.fb6598"
            ]
        ]
    },
    {
        "id": "d99d36d2.a41738",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1408.0039367675781,
        "y": 477.00401973724365,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "fae65389.46b4c"
            ]
        ]
    },
    {
        "id": "d90c54fd.fb6598",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1652.0041809082031,
        "y": 348.0039281845093,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "bafba09b.77276"
            ]
        ]
    },
    {
        "id": "2e6e9e5e.d18972",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error in Getting A1 Policy Instances. Aborting\" />",
        "comments": "",
        "x": 1568.0045166015625,
        "y": 584.0039892196655,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "bafba09b.77276",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1802.0037860870361,
        "y": 312.00395822525024,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "53d1c58f.35908c"
            ]
        ]
    },
    {
        "id": "53d1c58f.35908c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Details of A1 Policy Instance \"/>\n<parameter name=\"field2\" value=\"`$a1MediatorRsp`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1982.0039100646973,
        "y": 286.00390911102295,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "a5d36c9a.4d26a",
        "type": "block",
        "name": "DMAAP Reponse Publish",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1938.0040283203125,
        "y": 681.0040578842163,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "929dc7d7.1039c8",
                "dc1ffc54.5e3cd",
                "fe0ccd89.12fd1"
            ]
        ]
    },
    {
        "id": "dc1ffc54.5e3cd",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n    <parameter name='restapiUrl' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name='responsePrefix' value='dmaap' />",
        "comments": "",
        "outputs": 1,
        "x": 2287.0042266845703,
        "y": 859.0034625530243,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "76f21871.691708",
                "8e9322d6.6a8b9"
            ]
        ]
    },
    {
        "id": "929dc7d7.1039c8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='tmp.a1-adapter-api.rpc-name' value='getPolicyInstance'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-code' value='`$response-code`'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-value' value='`$response-message`'/>\n<parameter name='tmp.a1Policy-dmaap-resp.payload' value=\"Working On it\" />",
        "comments": "",
        "x": 2276.670944213867,
        "y": 650.0040187835693,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "76f21871.691708",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2502.5041122436523,
        "y": 781.9207663536072,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "aae104a5.55a318"
            ]
        ]
    },
    {
        "id": "8e9322d6.6a8b9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2506.5040321350098,
        "y": 920.920608997345,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "98ac5348.1769d"
            ]
        ]
    },
    {
        "id": "aae104a5.55a318",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2662.5039463043213,
        "y": 783.9207673072815,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "9195416c.3d54d"
            ]
        ]
    },
    {
        "id": "9195416c.3d54d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error publishing DMAAP A1 Policy Response message. \" />",
        "comments": "",
        "x": 2844.503677368164,
        "y": 774.9208431243896,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "98ac5348.1769d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2689.5036754608154,
        "y": 913.920717716217,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "a2280756.7ffb78"
            ]
        ]
    },
    {
        "id": "a2280756.7ffb78",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"DMAAP A1Policy message Successfully Published \"/>",
        "comments": "",
        "outputs": 1,
        "x": 2875.5038299560547,
        "y": 901.9210414886475,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "fe0ccd89.12fd1",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Before DMAAP Event - template file name, restapiURL\"/>\n<parameter name='field3' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n<parameter name='field4' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n<parameter name='field5' value=\"Status Code and Status Value to be published\" />\n<parameter name='field6' value=\"`$tmp.a1Adapter-dmaap-resp.status-code`\" />\n<parameter name='field7' value=\"`$tmp.a1Adapter-dmaap-resp.status-value`\" />\n<parameter name='field8' value=\"A1 Adapter DMAAP Response Payload\" />\n<parameter name='field9' value=\"`$tmp.a1Policy-dmaap-resp.payload`\" />\n<parameter name='field10' value=\"RPC Name\" />\n<parameter name='field11' value=\"`$tmp.a1-adapter-api.rpc-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2285.504165649414,
        "y": 741.4589986801147,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "3cf054c2.6c700c",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Deployed'/>\n",
        "comments": "",
        "x": 1353.0040588378906,
        "y": 566.0039277076721,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "cdb5081e.c62b38",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='Seems A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1727.757869720459,
        "y": 413.00780391693115,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "857216e8.e8f328",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 693.7578010559082,
        "y": 823.0078420639038,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "bb3497e8.2c2608",
                "a5d36c9a.4d26a"
            ]
        ]
    },
    {
        "id": "bb3497e8.2c2608",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='getPolicyInstance executed successfully'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 843.7578449249268,
        "y": 905.0078115463257,
        "z": "9a83e9ac.8e87e8",
        "wires": []
    },
    {
        "id": "fae65389.46b4c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1554.0077781677246,
        "y": 480.0078344345093,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            [
                "cdb5081e.c62b38",
                "a5d36c9a.4d26a",
                "2e6e9e5e.d18972"
            ]
        ]
    },
    {
        "id": "6419a04c.32704",
        "type": "execute",
        "name": "generate A1 Mediator URL 1",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.policy`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policyinstance-url\"/>\n    <parameter name=\"target\" value=\"{policy_type_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-type-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1483.0042419433594,
        "y": 227.0039050579071,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "f3275c75.b49b7",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Get Policy Instance.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.policy-instance-id`\"/>\n<parameter name=\"field5\" value=\"`$tmp.restapi.policyinstance-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1430.0046348571777,
        "y": 316.88250637054443,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    },
    {
        "id": "e3d7b540.043a18",
        "type": "execute",
        "name": "generate A1 Mediator URL 2",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.restapi.policyinstance-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policyinstance-url\"/>\n    <parameter name=\"target\" value=\"{policy_instance_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1489.2538757324219,
        "y": 275.00391244888306,
        "z": "9a83e9ac.8e87e8",
        "wires": [
            []
        ]
    }
]