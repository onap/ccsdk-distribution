[
    {
        "id": "9dde080b.cba258",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 196.3333282470703,
        "y": 155.33334350585938,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "fbe29d3.7f5456"
            ]
        ]
    },
    {
        "id": "fbe29d3.7f5456",
        "type": "method",
        "name": "method deletePolicyInstance",
        "xml": "<method rpc='deletePolicyInstance' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 257.3333282470703,
        "y": 275.3333435058594,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "b45111b9.f269b"
            ]
        ]
    },
    {
        "id": "6ef8953a.4d3f14",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Delete Policy Instance  associated with Near RT RIC ID and Policy Type ID\"/>\n<parameter name=\"field2\" value=\"`$delete-policy-instance-input.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$delete-policy-instance-input.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$delete-policy-instance-input.policy-instance-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 721.3333282470703,
        "y": 90.33334350585938,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "b45111b9.f269b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 462.3333282470703,
        "y": 229.33334350585938,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "6ef8953a.4d3f14",
                "8abe6661.b18e",
                "b139be89.796fe",
                "57230909.392d28",
                "d6f0c2c6.39fc1"
            ]
        ]
    },
    {
        "id": "a1be79b4.ba3668",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 129.3333282470703,
        "y": 91.33334350585938,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "9dde080b.cba258"
            ]
        ]
    },
    {
        "id": "8abe6661.b18e",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='deletePolicyInstance executed successfully' />",
        "comments": "",
        "x": 761.3333740234375,
        "y": 144.3333444595337,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "b139be89.796fe",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 761.3333282470703,
        "y": 197.33334350585938,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "57230909.392d28",
        "type": "switchNode",
        "name": "A1 Mediator Deployed",
        "xml": "<switch test='`$prop.ric-plt-A1Mediator-deployed`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 711.3333282470703,
        "y": 253.33334350585938,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "2c08ce3d.cf2e2a",
                "f8d5b756.691068"
            ]
        ]
    },
    {
        "id": "f8d5b756.691068",
        "type": "outcome",
        "name": "Deployed",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 995.3333740234375,
        "y": 113.33340883255005,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "eeaaaeea.9ae43"
            ]
        ]
    },
    {
        "id": "eeaaaeea.9ae43",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 972.333423614502,
        "y": 259.33336114883423,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "145fcae6.7b9fa5"
            ]
        ]
    },
    {
        "id": "2c08ce3d.cf2e2a",
        "type": "outcome",
        "name": "Not Deployed",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 948.3333969116211,
        "y": 548.3334050178528,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "b0bbcdad.b267c"
            ]
        ]
    },
    {
        "id": "b0bbcdad.b267c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1163.3334350585938,
        "y": 677.3333578109741,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "e79f3662.6608b",
                "d7f8a143.0a1238",
                "b1b6432e.d7ac38"
            ]
        ]
    },
    {
        "id": "e79f3662.6608b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error in Deleting A1 Policy Instance. Aborting\" />",
        "comments": "",
        "x": 1293.333251953125,
        "y": 758.3333420753479,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "145fcae6.7b9fa5",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1166.3334350585938,
        "y": 370.33334797620773,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "5ed25c96.e60674",
                "de9b66e2.7a7068",
                "159d964a.ea131a",
                "c02a1a05.8aa7d",
                "5e4558e6.921e38",
                "9823aa6e.7e0d58"
            ]
        ]
    },
    {
        "id": "de9b66e2.7a7068",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$delete-policy-instance-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.policy-type-id\" value=\"`$delete-policy-instance-input.policy-type-id`\"/>\n<parameter name=\"tmp.policy-instance-id\" value=\"`$delete-policy-instance-input.policy-instance-id`\"/>\n",
        "comments": "",
        "x": 1504.3347930908203,
        "y": 168.22247409820557,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "5ed25c96.e60674",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Delete Policy Instance.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.policy-instance-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1425.333423614502,
        "y": 221.33334636688232,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "159d964a.ea131a",
        "type": "execute",
        "name": "Delete Policy Instance",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`'http://' + $get-health-check-input.host-ip-address + ':' + $prop.nearric.port + '/' + $tmp.restapi.policyinstance-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"DELETE\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"false\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1443.3339385986328,
        "y": 424.34374141693115,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "76033cfb.4d3bf4",
                "865fb446.05b288"
            ]
        ]
    },
    {
        "id": "76033cfb.4d3bf4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1419.3333587646484,
        "y": 521.333456993103,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "f38269d.5e9e118"
            ]
        ]
    },
    {
        "id": "865fb446.05b288",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1663.3336029052734,
        "y": 392.33336544036865,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "34c8f9f8.58890e"
            ]
        ]
    },
    {
        "id": "9af7b4f6.d5fc9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error in Deleting A1 Policy Instance. Aborting\" />",
        "comments": "",
        "x": 1579.3339385986328,
        "y": 628.3334264755249,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "34c8f9f8.58890e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1813.3332080841064,
        "y": 356.3333954811096,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "10df05f4.58b38a"
            ]
        ]
    },
    {
        "id": "10df05f4.58b38a",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Details of A1 Policy Instance \"/>\n<parameter name=\"field2\" value=\"`$a1MediatorRsp`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1993.3333320617676,
        "y": 330.3333463668823,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "d7f8a143.0a1238",
        "type": "block",
        "name": "DMAAP Reponse Publish",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1949.3334503173828,
        "y": 725.3334951400757,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "bd5924a4.6feca8",
                "b9874b88.a96bc8",
                "8ff95c85.dcb2d"
            ]
        ]
    },
    {
        "id": "b9874b88.a96bc8",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n    <parameter name='restapiUrl' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name='responsePrefix' value='dmaap' />",
        "comments": "",
        "outputs": 1,
        "x": 2298.3336486816406,
        "y": 903.3328998088837,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "cae9437a.b4e89",
                "1bd25526.f63723"
            ]
        ]
    },
    {
        "id": "bd5924a4.6feca8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='tmp.a1-adapter-api.rpc-name' value='deletePolicyInstance'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-code' value='`$response-code`'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-value' value='`$response-message`'/>\n<parameter name='tmp.a1Policy-dmaap-resp.payload' value=\"Working On it\" />",
        "comments": "",
        "x": 2288.0003662109375,
        "y": 694.3334560394287,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "cae9437a.b4e89",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2513.8335342407227,
        "y": 826.2502036094666,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "e6934dc.ca04fb"
            ]
        ]
    },
    {
        "id": "1bd25526.f63723",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2517.83345413208,
        "y": 965.2500462532043,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "ffc499de.c7ef98"
            ]
        ]
    },
    {
        "id": "e6934dc.ca04fb",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2673.8333683013916,
        "y": 828.2502045631409,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "846d57fa.60323"
            ]
        ]
    },
    {
        "id": "846d57fa.60323",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error publishing DMAAP A1 Policy Response message. \" />",
        "comments": "",
        "x": 2855.8330993652344,
        "y": 819.250280380249,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "ffc499de.c7ef98",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2700.8330974578857,
        "y": 958.2501549720764,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "8055b6b8.b57a08"
            ]
        ]
    },
    {
        "id": "8055b6b8.b57a08",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"DMAAP A1Policy message Successfully Published \"/>",
        "comments": "",
        "outputs": 1,
        "x": 2886.833251953125,
        "y": 946.2504787445068,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "8ff95c85.dcb2d",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Before DMAAP Event - template file name, restapiURL\"/>\n<parameter name='field3' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n<parameter name='field4' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n<parameter name='field5' value=\"Status Code and Status Value to be published\" />\n<parameter name='field6' value=\"`$tmp.a1Adapter-dmaap-resp.status-code`\" />\n<parameter name='field7' value=\"`$tmp.a1Adapter-dmaap-resp.status-value`\" />\n<parameter name='field8' value=\"A1 Adapter DMAAP Response Payload\" />\n<parameter name='field9' value=\"`$tmp.a1Policy-dmaap-resp.payload`\" />\n<parameter name='field10' value=\"RPC Name\" />\n<parameter name='field11' value=\"`$tmp.a1-adapter-api.rpc-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2296.8335876464844,
        "y": 785.7884359359741,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "b1b6432e.d7ac38",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Deployed'/>\n",
        "comments": "",
        "x": 1343.33353805542,
        "y": 611.3333358764648,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "6185a957.b0e52",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='Seems A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1739.0872917175293,
        "y": 457.3372411727905,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "d6f0c2c6.39fc1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 705.0872230529785,
        "y": 867.3372793197632,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "c7736d10.29088",
                "d7f8a143.0a1238"
            ]
        ]
    },
    {
        "id": "c7736d10.29088",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='deletePolicyInstance executed successfully'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 860.0873107910156,
        "y": 951.3372840881348,
        "z": "119b82fd.eb153d",
        "wires": []
    },
    {
        "id": "f38269d.5e9e118",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1565.337200164795,
        "y": 524.3372716903687,
        "z": "119b82fd.eb153d",
        "wires": [
            [
                "6185a957.b0e52",
                "d7f8a143.0a1238",
                "9af7b4f6.d5fc9"
            ]
        ]
    },
    {
        "id": "c02a1a05.8aa7d",
        "type": "execute",
        "name": "generate A1 Mediator URL 1",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.policy`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policyinstance-url\"/>\n    <parameter name=\"target\" value=\"{policy_type_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-type-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1501.3338470458984,
        "y": 269.3333463668823,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "5e4558e6.921e38",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Delete Policy Instance.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.policy-instance-id`\"/>\n<parameter name=\"field5\" value=\"`$tmp.restapi.policyinstance-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1441.334056854248,
        "y": 361.2119436264038,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    },
    {
        "id": "9823aa6e.7e0d58",
        "type": "execute",
        "name": "generate A1 Mediator URL 2",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.restapi.policyinstance-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policyinstance-url\"/>\n    <parameter name=\"target\" value=\"{policy_instance_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1500.5832977294922,
        "y": 319.33334970474243,
        "z": "119b82fd.eb153d",
        "wires": [
            []
        ]
    }
]