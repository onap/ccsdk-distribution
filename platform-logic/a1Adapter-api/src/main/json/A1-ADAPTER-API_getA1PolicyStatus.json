[
    {
        "id": "7547a4fa.c7bbcc",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 172,
        "y": 213,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "1108b3bd.2f6f4c"
            ]
        ]
    },
    {
        "id": "1108b3bd.2f6f4c",
        "type": "method",
        "name": "method getA1PolicyStatus",
        "xml": "<method rpc='getA1PolicyStatus' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 231,
        "y": 334,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "423ee9ab.f84d58"
            ]
        ]
    },
    {
        "id": "86ab57c6.4239e8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Get A1 Policy Status:\"/>\n<parameter name=\"field2\" value=\"`$get-a1-policy-status-input.near-rt-ric-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 695,
        "y": 148,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "423ee9ab.f84d58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 436,
        "y": 288,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "86ab57c6.4239e8",
                "377e4bc4.cf6254",
                "d0dee2e1.f5a44",
                "2064dc6c.f4a0b4",
                "7b79073a.3842e8"
            ]
        ]
    },
    {
        "id": "9743b8a8.158568",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 103,
        "y": 150,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "7547a4fa.c7bbcc"
            ]
        ]
    },
    {
        "id": "377e4bc4.cf6254",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='Get A1 Policy executed successfully' />",
        "comments": "",
        "x": 736.0000610351562,
        "y": 203,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "d0dee2e1.f5a44",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 735,
        "y": 256,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "7b79073a.3842e8",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 765.0001220703125,
        "y": 340,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "f6e87f8b.c8e97",
                "484e89c8.8a2518",
                "106aff5e.8841f1",
                "7df3b9b5.9298c8"
            ]
        ]
    },
    {
        "id": "484e89c8.8a2518",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-url\" value=\"`$get-a1-policy-status-input.near-rt-ric-url`\"/>",
        "comments": "",
        "x": 1138.00146484375,
        "y": 237.88912963867188,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "f6e87f8b.c8e97",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Get Policy Status.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1015.0001220703125,
        "y": 416,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "106aff5e.8841f1",
        "type": "execute",
        "name": "Get Policy Instance Status",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$tmp.near-rt-ric-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"GET\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"true\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1079.0006103515625,
        "y": 544.0103759765625,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "f3f6f62a.f41478",
                "969a94ea.773e38"
            ]
        ]
    },
    {
        "id": "f3f6f62a.f41478",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1303,
        "y": 624.0001220703125,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "6fa34f65.cd31e"
            ]
        ]
    },
    {
        "id": "969a94ea.773e38",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1307.000244140625,
        "y": 470.0000305175781,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "bb9a433.67534c"
            ]
        ]
    },
    {
        "id": "841abfc3.69c46",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"404\" />\n<parameter name=\"response-message\" value=\"Error in Getting A1 Policy Status. Aborting\" />",
        "comments": "",
        "x": 1610.0006103515625,
        "y": 679.0000610351562,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "bb9a433.67534c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1450.9998779296875,
        "y": 470.00006103515625,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "53bf49b8.e46be8",
                "23da3b63.1d7a64",
                "e316d95e.fbfff8"
            ]
        ]
    },
    {
        "id": "53bf49b8.e46be8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"A1 Get Policy Status \"/>\n<parameter name=\"field2\" value=\"`$tmp.a1-mediator-restapi.httpResponse`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1612,
        "y": 469,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "45d11c3c.69ea24",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='Seems A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1583.75390625,
        "y": 572.00390625,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "2064dc6c.f4a0b4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 698.75390625,
        "y": 560.00390625,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "fd599731.db71c8"
            ]
        ]
    },
    {
        "id": "fd599731.db71c8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='Get Policy Status executed successfully'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 859.7539672851562,
        "y": 560.0039672851562,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "6fa34f65.cd31e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1442.00390625,
        "y": 624.0039367675781,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "45d11c3c.69ea24",
                "841abfc3.69c46"
            ]
        ]
    },
    {
        "id": "23da3b63.1d7a64",
        "type": "execute",
        "name": "set",
        "xml": "<set>\n<parameter name='responseBody' value='`$tmp.a1-mediator-restapi.httpResponse`'/>",
        "comments": "",
        "outputs": 1,
        "x": 1614,
        "y": 520,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "e316d95e.fbfff8",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replaceAll' >\n    <parameter name=\"source\" value=\"`$a1MediatorRsp.httpResponse`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.a1-mediator-restapi.httpResponse\"/>\n    <parameter name=\"target\" value=\"\\n\"/>\n    <parameter name=\"replacement\" value=\"\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1616,
        "y": 426,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "b988a0f2.cebc8",
        "type": "execute",
        "name": "split near-rt-ric URL",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n    <parameter name=\"original_string\" value=\"`$tmp.near-rt-ric-url`\" />\n    <parameter name=\"regex\" value=\"/\"/>\n    <parameter name=\"ctx_memory_result_key\" value=\"tmp.near-rt-ric-url-splitList\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1994,
        "y": 318,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "6e6d1a6a.783024",
        "type": "for",
        "name": "for",
        "xml": "<for index='idx' start='3' end=\"`$tmp.near-rt-ric-url-splitList_length`\" >",
        "comments": "",
        "outputs": 1,
        "x": 1960,
        "y": 388,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "91e4428c.7143b"
            ]
        ]
    },
    {
        "id": "91e4428c.7143b",
        "type": "execute",
        "name": "set concat url",
        "xml": "<set>\n<parameter name='tmp.proxy-url' value=\"`$tmp.proxy-url +'/' + $tmp.near-rt-ric-url-splitList[$idx] `\" />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2138,
        "y": 388,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "5958734e.49501c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Get A1 Policy Status: Url with proxy: \"/>\n<parameter name=\"field2\" value=\"`$tmp.proxy-url`\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1960,
        "y": 451,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "d87bfe21.b6db5",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Get A1 Policy Status: No proxy found on properties file \"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1791,
        "y": 285,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "c12bf1b.56d2e1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1783,
        "y": 353,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "b988a0f2.cebc8",
                "6e6d1a6a.783024",
                "5958734e.49501c",
                "9090a68a.628a58"
            ]
        ]
    },
    {
        "id": "9090a68a.628a58",
        "type": "set",
        "name": "set variables for A1 Mediator with proxy url",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-url\" value=\"`$tmp.proxy-url`\"/>",
        "comments": "",
        "x": 2070,
        "y": 512,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "768b81d4.9d20c",
        "type": "outcome",
        "name": "Otherwise",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1619,
        "y": 353,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "c12bf1b.56d2e1"
            ]
        ]
    },
    {
        "id": "b3216caa.c1505",
        "type": "outcome",
        "name": "No proxy URL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1623,
        "y": 285,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "d87bfe21.b6db5"
            ]
        ]
    },
    {
        "id": "5379ad2e.52cba4",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test='`$tmp.proxy-url`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1444,
        "y": 319,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "b3216caa.c1505",
                "768b81d4.9d20c"
            ]
        ]
    },
    {
        "id": "2151b182.f0aebe",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Get A1 Policy Status: Check for proxy url: \"/>\n<parameter name=\"field2\" value=\"`$tmp.proxy-url`\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1445,
        "y": 236,
        "z": "ba6f4cc8.60e08",
        "wires": [
            []
        ]
    },
    {
        "id": "862a1de8.7e469",
        "type": "set",
        "name": "set tmp url variables with proxy information",
        "xml": "<set>\n<parameter name=\"tmp.proxy-url\" value=\"`$prop.a1Mediator.proxy.url`\"/>",
        "comments": "",
        "x": 1562,
        "y": 161,
        "z": "ba6f4cc8.60e08",
        "wires": []
    },
    {
        "id": "7df3b9b5.9298c8",
        "type": "block",
        "name": "block Substitute proxy address if available",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1117,
        "y": 326,
        "z": "ba6f4cc8.60e08",
        "wires": [
            [
                "862a1de8.7e469",
                "2151b182.f0aebe",
                "5379ad2e.52cba4"
            ]
        ]
    }
]