[
    {
        "id": "8e7ebfe0.72ff08",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 313.33331298828125,
        "y": 173.33334350585938,
        "z": "863e4485.36834",
        "wires": [
            [
                "c7c9e9f7.d04ec8"
            ]
        ]
    },
    {
        "id": "c7c9e9f7.d04ec8",
        "type": "method",
        "name": "method getHealthCheck",
        "xml": "<method rpc='getHealthCheck' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 374.33331298828125,
        "y": 293.3333435058594,
        "z": "863e4485.36834",
        "wires": [
            [
                "957adfb6.ddf508"
            ]
        ]
    },
    {
        "id": "4933972c.609698",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"A1 Adapter Health Check. Near RT RIC ID\"/>\n<parameter name=\"field2\" value=\"`$get-health-check-input.near-rt-ric-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 838.3333129882812,
        "y": 108.33334350585938,
        "z": "863e4485.36834",
        "wires": [
            []
        ]
    },
    {
        "id": "957adfb6.ddf508",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 579.3333129882812,
        "y": 247.33334350585938,
        "z": "863e4485.36834",
        "wires": [
            [
                "4933972c.609698",
                "ecffa919.3560a",
                "211ee71f.5d59e",
                "a018bb23.9e0ca",
                "8850d349.ceeb4"
            ]
        ]
    },
    {
        "id": "9f0c6496.1b93b8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 246.33331298828125,
        "y": 109.33334350585938,
        "z": "863e4485.36834",
        "wires": [
            [
                "8e7ebfe0.72ff08"
            ]
        ]
    },
    {
        "id": "ecffa919.3560a",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='A1 is Healthy' />",
        "comments": "",
        "x": 889.3333129882812,
        "y": 174.33334350585938,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "211ee71f.5d59e",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 878.3333129882812,
        "y": 215.33334350585938,
        "z": "863e4485.36834",
        "wires": [
            []
        ]
    },
    {
        "id": "a018bb23.9e0ca",
        "type": "switchNode",
        "name": "A1 Mediator Deployed",
        "xml": "<switch test='`$prop.ric-plt-A1Mediator-deployed`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 828.3333129882812,
        "y": 271.3333435058594,
        "z": "863e4485.36834",
        "wires": [
            [
                "70f1a125.1f0a4",
                "ec705860.7bcea"
            ]
        ]
    },
    {
        "id": "ec705860.7bcea",
        "type": "outcome",
        "name": "Deployed",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1112.3333587646484,
        "y": 131.33340883255005,
        "z": "863e4485.36834",
        "wires": [
            [
                "de3ed957.5c052"
            ]
        ]
    },
    {
        "id": "de3ed957.5c052",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1115.3333282470703,
        "y": 321.33335304260254,
        "z": "863e4485.36834",
        "wires": [
            [
                "2dcdc91.9c6f936"
            ]
        ]
    },
    {
        "id": "2dcdc91.9c6f936",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1291.3333435058594,
        "y": 241.33334589004517,
        "z": "863e4485.36834",
        "wires": [
            [
                "378d063c.6c5492"
            ]
        ]
    },
    {
        "id": "70f1a125.1f0a4",
        "type": "outcome",
        "name": "Not Deployed",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1065.333381652832,
        "y": 566.3334050178528,
        "z": "863e4485.36834",
        "wires": [
            [
                "470d338e.212154"
            ]
        ]
    },
    {
        "id": "470d338e.212154",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1280.3334197998047,
        "y": 695.3333578109741,
        "z": "863e4485.36834",
        "wires": [
            [
                "438edf7e.a454",
                "5da1b590.6d16c4",
                "3b9faa0f.cad236"
            ]
        ]
    },
    {
        "id": "438edf7e.a454",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"A1 Mediator Not Deployed. Aborting Health Check\" />",
        "comments": "",
        "x": 1405.3331756591797,
        "y": 776.3333423137665,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "b80804b5.6bd018",
        "type": "comment",
        "name": "No DMAAP Response Payload",
        "info": "",
        "comments": "",
        "x": 1583.3333129882812,
        "y": 182.33334350585938,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "378d063c.6c5492",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1262.3333129882812,
        "y": 411.3333574831486,
        "z": "863e4485.36834",
        "wires": [
            [
                "7bef8064.cd04a",
                "13dfae39.e04c3a",
                "47770c6c.1f130c"
            ]
        ]
    },
    {
        "id": "13dfae39.e04c3a",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$get-health-check-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.restapi.healthcheck-url\" value=\"`'http://' + $get-health-check-input.host-ip-address + ':' + $prop.nearric.port + '/' + $prop.restapi.healthcheck`\"/>",
        "comments": "",
        "x": 1650.3343811035156,
        "y": 317.2224413752556,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "7bef8064.cd04a",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Health Check.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.restapi.healthcheck-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1542.3333435058594,
        "y": 376.3333463668823,
        "z": "863e4485.36834",
        "wires": [
            []
        ]
    },
    {
        "id": "47770c6c.1f130c",
        "type": "execute",
        "name": "Check A1 Mediator Health",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$tmp.restapi.healthcheck-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"GET\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"false\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1575.3338012695312,
        "y": 456.34373331069946,
        "z": "863e4485.36834",
        "wires": [
            [
                "17b8a3a8.316fdc",
                "7e32c0b0.5e187"
            ]
        ]
    },
    {
        "id": "17b8a3a8.316fdc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1536.3333435058594,
        "y": 539.333456993103,
        "z": "863e4485.36834",
        "wires": [
            [
                "6bad57a1.4e0058"
            ]
        ]
    },
    {
        "id": "7e32c0b0.5e187",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1780.3335876464844,
        "y": 410.33336544036865,
        "z": "863e4485.36834",
        "wires": [
            [
                "8ba7cacf.63acd"
            ]
        ]
    },
    {
        "id": "940040d7.e1c9e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"404\" />\n<parameter name=\"response-message\" value=\"Error in A1 Mediator Health Check. Aborting A1 Health Check\" />",
        "comments": "",
        "x": 1696.3339233398438,
        "y": 646.3334264755249,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "8ba7cacf.63acd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1930.3331928253174,
        "y": 374.3333954811096,
        "z": "863e4485.36834",
        "wires": [
            [
                "62890421.6f075c"
            ]
        ]
    },
    {
        "id": "62890421.6f075c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"A1 Mediator is Healthy.\"/>",
        "comments": "",
        "outputs": 1,
        "x": 2107.3333435058594,
        "y": 347.33334255218506,
        "z": "863e4485.36834",
        "wires": [
            []
        ]
    },
    {
        "id": "5da1b590.6d16c4",
        "type": "block",
        "name": "DMAAP Reponse Publish",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2066.3334350585938,
        "y": 743.3334951400757,
        "z": "863e4485.36834",
        "wires": [
            [
                "15f0f687.0ed609",
                "acc0fdd3.1ae4e",
                "76df102e.4d504"
            ]
        ]
    },
    {
        "id": "acc0fdd3.1ae4e",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n    <parameter name='restapiUrl' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name='responsePrefix' value='dmaap' />",
        "comments": "",
        "outputs": 1,
        "x": 2415.3336334228516,
        "y": 921.3328998088837,
        "z": "863e4485.36834",
        "wires": [
            [
                "7e5d132d.992734",
                "2b9cd050.e0a3f"
            ]
        ]
    },
    {
        "id": "15f0f687.0ed609",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='tmp.a1-adapter-api.rpc-name' value='getHealthCheck'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-code' value='`$response-code`'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-value' value='`$response-message`'/>\n<parameter name='tmp.a1Policy-dmaap-resp.payload' value=\"None\" />",
        "comments": "",
        "x": 2404.00040435791,
        "y": 711.3334798812866,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "7e5d132d.992734",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2630.8335189819336,
        "y": 844.2502036094666,
        "z": "863e4485.36834",
        "wires": [
            [
                "42b7c211.c51e7c"
            ]
        ]
    },
    {
        "id": "2b9cd050.e0a3f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2634.833438873291,
        "y": 983.2500462532043,
        "z": "863e4485.36834",
        "wires": [
            [
                "b3c45cc1.212db"
            ]
        ]
    },
    {
        "id": "42b7c211.c51e7c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2790.8333530426025,
        "y": 846.2502045631409,
        "z": "863e4485.36834",
        "wires": [
            [
                "ec8b878d.8d17b"
            ]
        ]
    },
    {
        "id": "ec8b878d.8d17b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error publishing DMAAP A1 Policy Response message. \" />",
        "comments": "",
        "x": 2972.8330841064453,
        "y": 837.250280380249,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "b3c45cc1.212db",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2817.8330821990967,
        "y": 976.2501549720764,
        "z": "863e4485.36834",
        "wires": [
            [
                "8bde839d.15fa48"
            ]
        ]
    },
    {
        "id": "8bde839d.15fa48",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"DMAAP A1Policy message Successfully Published \"/>",
        "comments": "",
        "outputs": 1,
        "x": 3003.833236694336,
        "y": 964.2504787445068,
        "z": "863e4485.36834",
        "wires": [
            []
        ]
    },
    {
        "id": "76df102e.4d504",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Before DMAAP Event - template file name, restapiURL\"/>\n<parameter name='field3' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n<parameter name='field4' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n<parameter name='field5' value=\"Status Code and Status Value to be published\" />\n<parameter name='field6' value=\"`$tmp.a1Adapter-dmaap-resp.status-code`\" />\n<parameter name='field7' value=\"`$tmp.a1Adapter-dmaap-resp.status-value`\" />\n<parameter name='field8' value=\"A1 Adapter DMAAP Response Payload Not Required\" />\n<parameter name='field9' value=\"`$tmp.a1Policy-dmaap-resp.payload`\" />\n<parameter name='field10' value=\"RPC Name\" />\n<parameter name='field11' value=\"`$tmp.a1-adapter-api.rpc-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2411.833564758301,
        "y": 797.7884044647217,
        "z": "863e4485.36834",
        "wires": [
            []
        ]
    },
    {
        "id": "3b9faa0f.cad236",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Deployed'/>\n",
        "comments": "",
        "x": 1481.3334655761719,
        "y": 628.3333649635315,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "2db79f9b.99031",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1856.0872764587402,
        "y": 475.3372411727905,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "8850d349.ceeb4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 822.0872077941895,
        "y": 885.3372793197632,
        "z": "863e4485.36834",
        "wires": [
            [
                "8983f326.7db1b8",
                "5da1b590.6d16c4"
            ]
        ]
    },
    {
        "id": "8983f326.7db1b8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='A1 Adapter is healthy'/>\n<parameter name='health-status' value='200'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 972.087251663208,
        "y": 967.3372488021851,
        "z": "863e4485.36834",
        "wires": []
    },
    {
        "id": "6bad57a1.4e0058",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1682.3371849060059,
        "y": 542.3372716903687,
        "z": "863e4485.36834",
        "wires": [
            [
                "2db79f9b.99031",
                "5da1b590.6d16c4",
                "940040d7.e1c9e8"
            ]
        ]
    }
]