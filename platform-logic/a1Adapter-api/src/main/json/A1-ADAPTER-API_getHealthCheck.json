[
    {
        "id": "f70577cd.2332b8",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 166,
        "y": 89,
        "z": "71073541.7e954c",
        "wires": [
            [
                "51320529.8c13fc"
            ]
        ]
    },
    {
        "id": "51320529.8c13fc",
        "type": "method",
        "name": "method getHealthCheck",
        "xml": "<method rpc='getHealthCheck' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 227,
        "y": 209,
        "z": "71073541.7e954c",
        "wires": [
            [
                "50c04d9d.eb06a4"
            ]
        ]
    },
    {
        "id": "cf6fe4d2.e21a88",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"A1 Adapter Health Check. Near RT RIC ID\"/>\n<parameter name=\"field2\" value=\"`$get-health-check-input.near-rt-ric-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 691,
        "y": 24,
        "z": "71073541.7e954c",
        "wires": [
            []
        ]
    },
    {
        "id": "50c04d9d.eb06a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 432,
        "y": 163,
        "z": "71073541.7e954c",
        "wires": [
            [
                "cf6fe4d2.e21a88",
                "9b09eba5.e4dfa8",
                "fad38a44.2dff58",
                "da55f177.44ea9",
                "fe7bfe5c.0b58a"
            ]
        ]
    },
    {
        "id": "fdb9f2a9.d1099",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 99,
        "y": 25,
        "z": "71073541.7e954c",
        "wires": [
            [
                "f70577cd.2332b8"
            ]
        ]
    },
    {
        "id": "9b09eba5.e4dfa8",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='A1 is Healthy' />",
        "comments": "",
        "x": 742,
        "y": 90,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "fad38a44.2dff58",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 731,
        "y": 131,
        "z": "71073541.7e954c",
        "wires": [
            []
        ]
    },
    {
        "id": "da55f177.44ea9",
        "type": "switchNode",
        "name": "A1 Mediator Deployed",
        "xml": "<switch test='`$prop.ric-plt-A1Mediator-deployed`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 681,
        "y": 187,
        "z": "71073541.7e954c",
        "wires": [
            [
                "1b90a5eb.8a64ea",
                "df3dcdff.980fa"
            ]
        ]
    },
    {
        "id": "df3dcdff.980fa",
        "type": "outcome",
        "name": "Deployed",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 965.0000457763672,
        "y": 47.000065326690674,
        "z": "71073541.7e954c",
        "wires": [
            [
                "d65603a6.a6255"
            ]
        ]
    },
    {
        "id": "d65603a6.a6255",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 968.0000152587891,
        "y": 237.00000953674316,
        "z": "71073541.7e954c",
        "wires": [
            [
                "fad8a7e7.6c01c8"
            ]
        ]
    },
    {
        "id": "fad8a7e7.6c01c8",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1144.0000305175781,
        "y": 157.0000023841858,
        "z": "71073541.7e954c",
        "wires": [
            [
                "239aaf9f.539e4"
            ]
        ]
    },
    {
        "id": "1b90a5eb.8a64ea",
        "type": "outcome",
        "name": "Not Deployed",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 918.0000686645508,
        "y": 482.0000615119934,
        "z": "71073541.7e954c",
        "wires": [
            [
                "d91da8b7.4c9cd8"
            ]
        ]
    },
    {
        "id": "d91da8b7.4c9cd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1133.0001068115234,
        "y": 611.0000143051147,
        "z": "71073541.7e954c",
        "wires": [
            [
                "373e75ec.2ef50a",
                "ad639178.ea45b",
                "1d8bf60c.0ab74a"
            ]
        ]
    },
    {
        "id": "373e75ec.2ef50a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"A1 Mediator Not Deployed. Aborting Health Check\" />",
        "comments": "",
        "x": 1257.9998626708984,
        "y": 691.9999988079071,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "db9f306b.9d952",
        "type": "comment",
        "name": "No DMAAP Response Payload",
        "info": "",
        "comments": "",
        "x": 1436,
        "y": 98,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "239aaf9f.539e4",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1115,
        "y": 327.0000139772892,
        "z": "71073541.7e954c",
        "wires": [
            [
                "a401c326.c2be8",
                "34de0f9a.82fab",
                "742ba549.33a0fc"
            ]
        ]
    },
    {
        "id": "34de0f9a.82fab",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$get-health-check-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.restapi.healthcheck-url\" value=\"`$prop.restapi.healthcheck`\"/>",
        "comments": "",
        "x": 1503.0010681152344,
        "y": 232.8890978693962,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "a401c326.c2be8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Health Check.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.restapi.healthcheck-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1395.0000305175781,
        "y": 292.00000286102295,
        "z": "71073541.7e954c",
        "wires": [
            []
        ]
    },
    {
        "id": "742ba549.33a0fc",
        "type": "execute",
        "name": "Check A1 Mediator Health",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.a1Mediator.url + '/' + $tmp.restapi.healthcheck-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"GET\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"false\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1428.00048828125,
        "y": 372.0103898048401,
        "z": "71073541.7e954c",
        "wires": [
            [
                "54a96509.b22d6c",
                "5a29f4f5.fc1fcc"
            ]
        ]
    },
    {
        "id": "54a96509.b22d6c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1389.0000305175781,
        "y": 455.00011348724365,
        "z": "71073541.7e954c",
        "wires": [
            [
                "fc4e3c1b.c7139"
            ]
        ]
    },
    {
        "id": "5a29f4f5.fc1fcc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1633.0002746582031,
        "y": 326.0000219345093,
        "z": "71073541.7e954c",
        "wires": [
            [
                "10397796.f90e08"
            ]
        ]
    },
    {
        "id": "81144d1f.a8a31",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"404\" />\n<parameter name=\"response-message\" value=\"Error in A1 Mediator Health Check. Aborting A1 Health Check\" />",
        "comments": "",
        "x": 1549.0006103515625,
        "y": 562.0000829696655,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "10397796.f90e08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1782.9998798370361,
        "y": 290.00005197525024,
        "z": "71073541.7e954c",
        "wires": [
            [
                "acc2e27c.325de"
            ]
        ]
    },
    {
        "id": "acc2e27c.325de",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"A1 Mediator is Healthy.\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1960.0000305175781,
        "y": 262.9999990463257,
        "z": "71073541.7e954c",
        "wires": [
            []
        ]
    },
    {
        "id": "ad639178.ea45b",
        "type": "block",
        "name": "DMAAP Reponse Publish",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1919.0001220703125,
        "y": 659.0001516342163,
        "z": "71073541.7e954c",
        "wires": [
            [
                "52a8bbd0.8d15e4",
                "1824af45.7c4c31",
                "d55641b9.0d8a"
            ]
        ]
    },
    {
        "id": "1824af45.7c4c31",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n    <parameter name='restapiUrl' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name='responsePrefix' value='dmaap' />",
        "comments": "",
        "outputs": 1,
        "x": 2268.0003204345703,
        "y": 836.9995563030243,
        "z": "71073541.7e954c",
        "wires": [
            [
                "b67eb7fa.2e8d88",
                "b7c6de0.48aae2"
            ]
        ]
    },
    {
        "id": "52a8bbd0.8d15e4",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='tmp.a1-adapter-api.rpc-name' value='getHealthCheck'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-code' value='`$response-code`'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-value' value='`$response-message`'/>\n<parameter name='tmp.a1Policy-dmaap-resp.payload' value=\"None\" />",
        "comments": "",
        "x": 2256.667091369629,
        "y": 627.0001363754272,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "b67eb7fa.2e8d88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2483.5002059936523,
        "y": 759.9168601036072,
        "z": "71073541.7e954c",
        "wires": [
            [
                "5004b5da.bc5e3c"
            ]
        ]
    },
    {
        "id": "b7c6de0.48aae2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2487.5001258850098,
        "y": 898.916702747345,
        "z": "71073541.7e954c",
        "wires": [
            [
                "c46eaf10.81be1"
            ]
        ]
    },
    {
        "id": "5004b5da.bc5e3c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2643.5000400543213,
        "y": 761.9168610572815,
        "z": "71073541.7e954c",
        "wires": [
            [
                "1c492a8f.477515"
            ]
        ]
    },
    {
        "id": "1c492a8f.477515",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error publishing DMAAP A1 Policy Response message. \" />",
        "comments": "",
        "x": 2825.499771118164,
        "y": 752.9169368743896,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "c46eaf10.81be1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2670.4997692108154,
        "y": 891.916811466217,
        "z": "71073541.7e954c",
        "wires": [
            [
                "cd499a2b.0f9d88"
            ]
        ]
    },
    {
        "id": "cd499a2b.0f9d88",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"DMAAP A1Policy message Successfully Published \"/>",
        "comments": "",
        "outputs": 1,
        "x": 2856.4999237060547,
        "y": 879.9171352386475,
        "z": "71073541.7e954c",
        "wires": [
            []
        ]
    },
    {
        "id": "d55641b9.0d8a",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Before DMAAP Event - template file name, restapiURL\"/>\n<parameter name='field3' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n<parameter name='field4' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n<parameter name='field5' value=\"Status Code and Status Value to be published\" />\n<parameter name='field6' value=\"`$tmp.a1Adapter-dmaap-resp.status-code`\" />\n<parameter name='field7' value=\"`$tmp.a1Adapter-dmaap-resp.status-value`\" />\n<parameter name='field8' value=\"A1 Adapter DMAAP Response Payload Not Required\" />\n<parameter name='field9' value=\"`$tmp.a1Policy-dmaap-resp.payload`\" />\n<parameter name='field10' value=\"RPC Name\" />\n<parameter name='field11' value=\"`$tmp.a1-adapter-api.rpc-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2264.5002517700195,
        "y": 713.4550609588623,
        "z": "71073541.7e954c",
        "wires": [
            []
        ]
    },
    {
        "id": "1d8bf60c.0ab74a",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Deployed'/>\n",
        "comments": "",
        "x": 1334.0001525878906,
        "y": 544.0000214576721,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "cdf48a0a.84bf18",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1708.753963470459,
        "y": 391.00389766693115,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "fe7bfe5c.0b58a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 674.7538948059082,
        "y": 801.0039358139038,
        "z": "71073541.7e954c",
        "wires": [
            [
                "fd40a79.a6fb958",
                "ad639178.ea45b"
            ]
        ]
    },
    {
        "id": "fd40a79.a6fb958",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='A1 Adapter is healthy'/>\n<parameter name='health-status' value='200'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 824.7539386749268,
        "y": 883.0039052963257,
        "z": "71073541.7e954c",
        "wires": []
    },
    {
        "id": "fc4e3c1b.c7139",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1535.0038719177246,
        "y": 458.0039281845093,
        "z": "71073541.7e954c",
        "wires": [
            [
                "cdf48a0a.84bf18",
                "ad639178.ea45b",
                "81144d1f.a8a31"
            ]
        ]
    }
]