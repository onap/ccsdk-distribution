[
    {
        "id": "528161c6.ca5cc",
        "type": "service-logic",
        "name": "A1-ADAPTER-API ${project.version}",
        "module": "A1-ADAPTER-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='A1-ADAPTER-API' version='${project.version}'>",
        "outputs": 1,
        "x": 222.00390625,
        "y": 126.00390625,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "570dbd6.b447044"
            ]
        ]
    },
    {
        "id": "570dbd6.b447044",
        "type": "method",
        "name": "method deletePolicyType",
        "xml": "<method rpc='deletePolicyType' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 285.00391387939453,
        "y": 249.00391578674316,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "a960170a.25ddb8"
            ]
        ]
    },
    {
        "id": "28f744fe.e4b2dc",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Delete Policy Type from Near RT RIC ID\"/>\n<parameter name=\"field2\" value=\"`$delete-policy-type-input.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$delete-policy-type-input.policy-type-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 748.0039215087891,
        "y": 64.00390481948853,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "a960170a.25ddb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 488.00390625,
        "y": 200.00390625,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "28f744fe.e4b2dc",
                "bef5d8a0.98d8d8",
                "886fc2e2.c002c",
                "213c6c30.2b9d94",
                "e9d83a7c.da03c8"
            ]
        ]
    },
    {
        "id": "47be5f8d.0adad",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 155.00390625,
        "y": 62.00390625,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "528161c6.ca5cc"
            ]
        ]
    },
    {
        "id": "bef5d8a0.98d8d8",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='deletePolicyType executed successfully' />",
        "comments": "",
        "x": 787.0040130615234,
        "y": 115.00390434265137,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "886fc2e2.c002c",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/a1-adapter-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 787.00390625,
        "y": 168.00390625,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "213c6c30.2b9d94",
        "type": "switchNode",
        "name": "A1 Mediator Deployed",
        "xml": "<switch test='`$prop.ric-plt-A1Mediator-deployed`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 737.00390625,
        "y": 224.00390625,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "e51fb4c1.a78c38",
                "e80e3882.d37798"
            ]
        ]
    },
    {
        "id": "e80e3882.d37798",
        "type": "outcome",
        "name": "Deployed",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1021.0039520263672,
        "y": 84.00397157669067,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "6dd79b4a.5d7ee4"
            ]
        ]
    },
    {
        "id": "6dd79b4a.5d7ee4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 998.0040016174316,
        "y": 230.00392389297485,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "abbff9fc.ef6df8"
            ]
        ]
    },
    {
        "id": "e51fb4c1.a78c38",
        "type": "outcome",
        "name": "Not Deployed",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 974.0039749145508,
        "y": 519.0039677619934,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "d5da56ba.4ea078"
            ]
        ]
    },
    {
        "id": "d5da56ba.4ea078",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1189.0040130615234,
        "y": 648.0039205551147,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "80281362.5baa8",
                "a218740b.e03078",
                "44ff6d07.0fa8a4"
            ]
        ]
    },
    {
        "id": "80281362.5baa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"A1 Mediator Not Deployed. Aborting Policy Delete\" />",
        "comments": "",
        "x": 1314.0037689208984,
        "y": 729.0039050579071,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "abbff9fc.ef6df8",
        "type": "block",
        "name": "A1 Mediator RestAPI Invocation",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1192.0040130615234,
        "y": 341.00391072034836,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "76c6cf0a.1a173",
                "59b120e4.f40e1",
                "c40bc3d7.346b7",
                "960ee141.dd015",
                "903b4506.e4f458"
            ]
        ]
    },
    {
        "id": "59b120e4.f40e1",
        "type": "set",
        "name": "set tmp variables for A1 Mediator REST API call",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$delete-policy-type-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.policy-type-id\" value=\"`$delete-policy-type-input.policy-type-id`\"/>",
        "comments": "",
        "x": 1539.0054321289062,
        "y": 179.8930459022522,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "76c6cf0a.1a173",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Delete Policy Type.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.restapi.policytype-url`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1454.0040550231934,
        "y": 333.0039167404175,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "c40bc3d7.346b7",
        "type": "execute",
        "name": "Delete  Policy Type",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.a1Mediator.url + '/' + $tmp.restapi.policytype-url`\"/>\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"DELETE\"/>\n<parameter name=\"responsePrefix\" value=\"a1MediatorRsp\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='accept' value='application/json' />\n<parameter name=\"convertResponse\" value=\"false\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1482.0045776367188,
        "y": 405.01428031921387,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "1d585b60.0cc545",
                "359283da.4d5d6c"
            ]
        ]
    },
    {
        "id": "1d585b60.0cc545",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1445.0039367675781,
        "y": 492.00401973724365,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "c2e429d5.e069b8"
            ]
        ]
    },
    {
        "id": "359283da.4d5d6c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1689.0041809082031,
        "y": 363.0039281845093,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "42c902a9.e4df7c"
            ]
        ]
    },
    {
        "id": "23c85e16.e15d92",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"404\" />\n<parameter name=\"response-message\" value=\"Error in Delete Policy. Aborting\" />",
        "comments": "",
        "x": 1605.0045166015625,
        "y": 599.0039892196655,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "42c902a9.e4df7c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1839.0037860870361,
        "y": 327.00395822525024,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "e5100108.3dca4"
            ]
        ]
    },
    {
        "id": "e5100108.3dca4",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Delete policy type operation executed against A1 Mediator \"/>",
        "comments": "",
        "outputs": 1,
        "x": 2026.0040035247803,
        "y": 318.0039052963257,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "a218740b.e03078",
        "type": "block",
        "name": "DMAAP Reponse Publish",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1975.0040283203125,
        "y": 696.0040578842163,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "8220447b.8289d8",
                "1dba3ab6.471df5",
                "942029f7.65a818"
            ]
        ]
    },
    {
        "id": "1dba3ab6.471df5",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n    <parameter name='restapiUrl' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name='responsePrefix' value='dmaap' />",
        "comments": "",
        "outputs": 1,
        "x": 2324.0042266845703,
        "y": 874.0034625530243,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "b33ac859.8eb828",
                "b9c18111.fc69a"
            ]
        ]
    },
    {
        "id": "8220447b.8289d8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='tmp.a1-adapter-api.rpc-name' value='deletePolicyType'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-code' value='`$response-code`'/>\n<parameter name='tmp.a1Adapter-dmaap-resp.status-value' value='`$response-message`'/>\n<parameter name='tmp.a1Policy-dmaap-resp.payload' value=\"Working On it\" />",
        "comments": "",
        "x": 2318.670913696289,
        "y": 670.004056930542,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "b33ac859.8eb828",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2539.5041122436523,
        "y": 796.9207663536072,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "625161a.b68eea"
            ]
        ]
    },
    {
        "id": "b9c18111.fc69a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2543.5040321350098,
        "y": 935.920608997345,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "3ca9895c.5c6906"
            ]
        ]
    },
    {
        "id": "625161a.b68eea",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2699.5039463043213,
        "y": 798.9207673072815,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "f57ce8d7.112bf8"
            ]
        ]
    },
    {
        "id": "f57ce8d7.112bf8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n<parameter name=\"response-code\" value=\"500\" />\n<parameter name=\"response-message\" value=\"Error publishing DMAAP A1 Policy Response message. \" />",
        "comments": "",
        "x": 2881.503677368164,
        "y": 789.9208431243896,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "3ca9895c.5c6906",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2726.5036754608154,
        "y": 928.920717716217,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "53f57334.ecf73c"
            ]
        ]
    },
    {
        "id": "53f57334.ecf73c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"DMAAP A1Policy message Successfully Published \"/>",
        "comments": "",
        "outputs": 1,
        "x": 2913.5039825439453,
        "y": 918.9210071563721,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "942029f7.65a818",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"Before DMAAP Event - template file name, restapiURL\"/>\n<parameter name='field3' value=\"`$prop.restapi.templateDir + '/' +  $prop.restapi.dmaap-publish-generic-response.template`\" />\n<parameter name='field4' value=\"`$prop.dmaap-message-router.url + $prop.a1Adapter-dmaap-policy-response.topic`\" />\n<parameter name='field5' value=\"Status Code and Status Value to be published\" />\n<parameter name='field6' value=\"`$tmp.a1Adapter-dmaap-resp.status-code`\" />\n<parameter name='field7' value=\"`$tmp.a1Adapter-dmaap-resp.status-value`\" />\n<parameter name='field8' value=\"A1 Adapter DMAAP Response Payload\" />\n<parameter name='field9' value=\"`$tmp.a1Policy-dmaap-resp.payload`\" />\n<parameter name='field10' value=\"RPC Name\" />\n<parameter name='field11' value=\"`$tmp.a1-adapter-api.rpc-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2322.504165649414,
        "y": 756.4589986801147,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "44ff6d07.0fa8a4",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='A1 Mediator Not Deployed'/>\n",
        "comments": "",
        "x": 1394.004238128662,
        "y": 585.0038967132568,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "9346d287.a0b54",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='response-code' value='500'/>\n<parameter name='response-message' value='Seems A1 Mediator Not Healthy'/>\n",
        "comments": "",
        "x": 1770.7577896118164,
        "y": 438.00782680511475,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "e9d83a7c.da03c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 730.7578010559082,
        "y": 838.0078420639038,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "c1eda177.24fc5",
                "a218740b.e03078"
            ]
        ]
    },
    {
        "id": "c1eda177.24fc5",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n<parameter name='response-code' value='200' />\n<parameter name='response-message' value='A1 Adapter is healthy'/>\n<parameter name='health-status' value='200'/>\n<parameter name='ack-final' value='Y'/>\n",
        "comments": "",
        "x": 880.7578449249268,
        "y": 920.0078115463257,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "c2e429d5.e069b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1591.0077781677246,
        "y": 495.0078344345093,
        "z": "bd2d1622.7875d8",
        "wires": [
            [
                "9346d287.a0b54",
                "a218740b.e03078",
                "23c85e16.e15d92"
            ]
        ]
    },
    {
        "id": "f4535bee.c15298",
        "type": "set",
        "name": "set tmp variables for input RPC parms",
        "xml": "<set>\n<parameter name=\"tmp.near-rt-ric-id\" value=\"`$create-policy-type-input.near-rt-ric-id`\"/>\n<parameter name=\"tmp.policy-type-id\" value=\"`$create-policy-type-input.policy-type-id`\"/>\n<parameter name=\"tmp.name\" value=\"`$create-policy-type-input.name`\"/>\n<parameter name=\"tmp.description\" value=\"`$create-policy-type-input.description`\"/>",
        "comments": "",
        "x": 214.00390625,
        "y": 491.00390625,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "960ee141.dd015",
        "type": "execute",
        "name": "generate A1 Mediator URL",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.policytype`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.restapi.policytype-url\"/>\n    <parameter name=\"target\" value=\"{policy_type_id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.policy-type-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1522.0032653808594,
        "y": 282.12531089782715,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "46b5244a.8aaaac",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Create Policy Type.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>\n<parameter name=\"field4\" value=\"`$tmp.name`\"/>\n<parameter name=\"field5\" value=\"`$tmp.restapi.policytype-url`\"/>\n<parameter name=\"field6\" value=\"`$a1-mediator.restapi-payload`\"/>\n<parameter name=\"field7\" value=\"Temporary A1 Mediatory Payload\"/>\n<parameter name=\"field8\" value=\"`$tmp.a1-mediator-restapi.payload`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 169.0029296875,
        "y": 664.1148071289062,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    },
    {
        "id": "55b4ff0a.c8ef9",
        "type": "set",
        "name": "set A1Mediator payload manually",
        "xml": "<set>\n<parameter name=\"tmp.a1-mediator-restapi.payload\" value='{\"blocking_rate\": 20,\"enforce\": true,\"trigger_threshold\": 10,\"window_length\": 10}'/>",
        "comments": "",
        "x": 216.0029296875,
        "y": 607.1148071289062,
        "z": "bd2d1622.7875d8",
        "wires": []
    },
    {
        "id": "903b4506.e4f458",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/A1-Adapter.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Setting variables for A1 Adapter Delete Policy Type.\"/>\n<parameter name=\"field2\" value=\"`$tmp.near-rt-ric-id`\"/>\n<parameter name=\"field3\" value=\"`$tmp.policy-type-id`\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1458.0038719177246,
        "y": 231.00391292572021,
        "z": "bd2d1622.7875d8",
        "wires": [
            []
        ]
    }
]