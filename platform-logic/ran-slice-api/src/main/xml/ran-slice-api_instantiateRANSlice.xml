<service-logic
    xmlns='http://www.onap.org/sdnc/svclogic'
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='ran-slice-api' version='${project.version}'>
    <method rpc='instantiateRANSlice' mode='sync'>
        <block atomic='true'>
            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                <parameter name="level" value="info" />
                <parameter name="field1" value="RPC to handle instantiateRANSlice.: "/>
                <parameter name="field2" value="`$instantiate-r-a-n-slice-input.action`"/>
                <parameter name="field3" value="`$instantiate-r-a-n-slice-input.common-header.timestamp`"/>
                <parameter name="field4" value="`$instantiate-r-a-n-slice-input.common-header.request-id`"/>
                <parameter name="field5" value="`$instantiate-r-a-n-slice-input.common-header.originator-id`"/>
                <parameter name="field6" value="RPC Payload String "/>
                <parameter name="field7" value="`$instantiate-r-a-n-slice-input.payload`"/>
            </record>
            <set>
                <parameter name='code' value='200' />
                <parameter name='message' value='Successful execution of createPolicyInstance RPC' />
            </set>
            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='jsonStringToCtx'>
                <parameter name='source' value='instantiate-r-a-n-slice-input.payload' />
                <parameter name='outputPath' value='payloadJson' />
                <parameter name='isEscaped' value='false' />
                <outcome value='success'>
                    <block atomic='true'>
                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >
                            <parameter name='filename' value='/opt/opendaylight/current/data/log/ranSlice-instantiateRANSlice-context.log' />
                        </execute>
                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                            <parameter name="level" value="info" />
                            <parameter name="field1" value="Payload for instantiateRANSlice.: "/>
                            <parameter name="field2" value="`$payloadJson.input.sliceProfile.sliceProfileId`"/>
                            <parameter name="field3" value="`$payloadJson.input.sliceProfile.NSSAI`"/>
                            <parameter name="field4" value="`$payloadJson.input.sliceProfile.maxNumberofUEs`"/>
                            <parameter name="field5" value="`$payloadJson.input.sliceProfile.latency`"/>
                            <parameter name="field6" value="`$payloadJson.input.sliceProfile.uLThptPerSlice`"/>
                            <parameter name="field7" value="`$payloadJson.input.sliceProfile.dLThptPerSlice`"/>
                            <parameter name="field8" value="`$payloadJson.input.sliceProfile.maxNumberofConns`"/>
                            <parameter name="field9" value="`$payloadJson.input.sliceProfile.coverageAreaList[0]`"/>
                            <parameter name="field10" value="`$payloadJson.input.sliceProfile.uEMobilityLevel`"/>
                            <parameter name="field11" value="`$payloadJson.input.sliceProfile.resourceSharingLevel`"/>
                            <parameter name="field12" value="`$payloadJson.input.RANNSSIId`"/>
                            <parameter name="field13" value="`$payloadJson.input.RANNFNSSIId`"/>
                            <parameter name="field14" value="`$payloadJson.input.callbackURL`"/>
                        </record>
                    </block>
                </outcome>
            </execute>
            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >
                <parameter name='filename' value='/opt/opendaylight/current/data/log/ranSlice-instantiateRANSlice-context.log' />
            </execute>
            <execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >
                <parameter name='fileName' value='/opt/onap/ccsdk/data/properties/ran-slice-api-dg.properties' />
                <parameter name='contextPrefix' value='prop' />
            </execute>
            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                <parameter name="level" value="info" />
                <parameter name="field1" value="Properties read .. controller details "/>
                <parameter name="field2" value="`$prop.controller.user`"/>
                <parameter name="field3" value="`$prop.controller.pwd`"/>
                <parameter name="field4" value="`$prop.controller.url`"/>
                <parameter name="field5" value="ransim-mounted (true/false): "/>
                <parameter name="field6" value="`$prop.ransim-mounted`"/>
                <parameter name="field7" value="config DB deployed (true/false): "/>
                <parameter name="field8" value="`$prop.configdb-deployed`"/>
            </record>
            <set>
                <parameter name='tmp.payload.trackingArea' value='`$payloadJson.input.sliceProfile.coverageAreaList[0]`'/>
                <parameter name='tmp.payload.callbackURL' value='`$payloadJson.input.callbackURL`'/>
                <parameter name='tmp.payload.RANNFNSSIId' value='`$payloadJson.input.RANNFNSSIId`'/>
                <parameter name='tmp.payload.RANNSSIId' value='`$payloadJson.input.RANNSSIId`'/>
                <parameter name='tmp.payload.coverageAreaList_length' value='`$payloadJson.input.sliceProfile.coverageAreaList_length`'/>
                <parameter name='tmp.payload.dLThptPerSlice' value='`$payloadJson.input.sliceProfile.dLThptPerSlice`'/>
                <parameter name='tmp.payload.latency' value='`$payloadJson.input.sliceProfile.latency`'/>
                <parameter name='tmp.payload.maxNumberofConns' value='`$payloadJson.input.sliceProfile.maxNumberofConns`'/>
                <parameter name='tmp.payload.maxNumberofUEs' value='`$payloadJson.input.sliceProfile.maxNumberofUEs`'/>
                <parameter name='tmp.payload.resourceSharingLevel' value='`$payloadJson.input.sliceProfile.resourceSharingLevel`'/>
                <parameter name='tmp.payload.sliceProfileId' value='`$payloadJson.input.sliceProfile.sliceProfileId`'/>
                <parameter name='tmp.payload.sNSSAI' value='`$payloadJson.input.sliceProfile.sNSSAI`'/>
                <parameter name='tmp.payload.uEMobilityLevel' value='`$payloadJson.input.sliceProfile.uEMobilityLevel`'/>
                <parameter name='tmp.payload.uLThptPerSlice' value='`$payloadJson.input.sliceProfile.uLThptPerSlice`'/>
                <parameter name='tmp.payload.pLMNId' value='`$payloadJson.input.sliceProfile.pLMNIdList[0]`'/>
            </set>
            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='substring'>
                <parameter name="string" value="`$tmp.payload.pLMNId`" />
                <parameter name="result" value="tmp.mcc"/>
                <parameter name="begin-index" value="0" />
                <parameter name="end-index" value="3" />
            </execute>
            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='substring'>
                <parameter name="string" value="`$tmp.payload.pLMNId`" />
                <parameter name="result" value="tmp.mnc"/>
                <parameter name="begin-index" value="4" />
            </execute>
            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                <parameter name="level" value="info" />
                <parameter name="field1" value="PLMNID from Payload: MCC-MNC "/>
                <parameter name="field2" value="`$tmp.mcc`"/>
                <parameter name="field3" value="`$tmp.mnc`"/>
            </record>
            <switch test='`$prop.configdb-deployed`'>
                <outcome value='true'>
                    <block atomic='true'>
                        <block atomic='true'>
                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                <parameter name="source" value="`$prop.restapi.configdb.getNearRTRICsFromTrackingArea`"/>
                                <parameter name="outputPath" value="tmp.configdb.getNearRTRICsFromTrackingArea.url"/>
                                <parameter name="target" value="{trackingArea}"/>
                                <parameter name="replacement" value="`$tmp.payload.trackingArea`"/>
                            </execute>
                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                <parameter name="level" value="info" />
                                <parameter name="field1" value="URL for configDB Get NearRTRIC for tracking area"/>
                                <parameter name='field2' value="`$prop.configdb.url + $tmp.configdb.getNearRTRICsFromTrackingArea.url`" />
                                <parameter name='field3' value="`$tmp.payload.trackingArea`" />
                            </record>
                            <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                <parameter name="restapiUrl" value="`$prop.configdb.url + $tmp.configdb.getNearRTRICsFromTrackingArea.url`"/>
                                <parameter name="httpMethod" value="GET"/>
                                <parameter name="responsePrefix" value="getRIC-configdb-response"/>
                                <parameter name='contentType' value='application/json' />
                                <parameter name='format' value='json' />
                                <parameter name='accept' value='application/json' />
                                <outcome value='failure'>
                                    <block>
                                        <set>
                                            <parameter name='code' value='500'/>
                                            <parameter name='message' value='Error Getting Info from ConfigDB. Aborting RPC executiopn'/>
                                        </set>
                                        <return status='failure'>
                                            <parameter name='ack-final' value='Y'/>
                                            <parameter name='code' value='500'/>
                                            <parameter name='message' value='Error Getting Info from ConfigDB. Aborting RPC executiopn'/>
                                        </return>
                                    </block>
                                </outcome>
                                <outcome value='success'>
                                    <block>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="Successfully Obtained NearRT RIC info from ConfigDB"/>
                                            <parameter name="field2" value="`$getRIC-configdb-response._length`"/>
                                            <parameter name="field3" value="`$getRIC-configdb-response.[0].gNBCUCPList_length`"/>
                                            <parameter name="field4" value="`$getRIC-configdb-response.[0].gNBCUUPList_length`"/>
                                            <parameter name="field5" value="`$getRIC-configdb-response.[0].gNBDUList_length`"/>
                                        </record>
                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >
                                            <parameter name='filename' value='/opt/opendaylight/current/data/log/ranSlice-instantiateRANSlice-configrsp-context.log' />
                                        </execute>
                                    </block>
                                </outcome>
                            </execute>
                        </block>
                        <block atomic='true'>
                            <block atomic='true'>
                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                    <parameter name="source" value="`$prop.restapi.configdb.getListOfCells`"/>
                                    <parameter name="outputPath" value="tmp.configdb.getListOfCells.url"/>
                                    <parameter name="target" value="{trackingArea}"/>
                                    <parameter name="replacement" value="`$tmp.payload.trackingArea`"/>
                                </execute>
                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                    <parameter name="level" value="info" />
                                    <parameter name="field1" value="URL for configDB Get getListOfCells for tracking area"/>
                                    <parameter name='field2' value="`$prop.configdb.url + $tmp.configdb.getListOfCells.url`" />
                                    <parameter name='field3' value="`$tmp.payload.trackingArea`" />
                                </record>
                                <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                    <parameter name="restapiUrl" value="`$prop.configdb.url + $tmp.configdb.getListOfCells.url`"/>
                                    <parameter name="httpMethod" value="GET"/>
                                    <parameter name="responsePrefix" value="getListofCells-configdb-response"/>
                                    <parameter name='contentType' value='application/json' />
                                    <parameter name='format' value='json' />
                                    <parameter name='accept' value='application/json' />
                                    <outcome value='failure'>
                                        <block>
                                            <set>
                                                <parameter name='code' value='500'/>
                                                <parameter name='message' value='Error Getting Info from ConfigDB. Aborting RPC executiopn'/>
                                            </set>
                                            <return status='failure'>
                                                <parameter name='ack-final' value='Y'/>
                                                <parameter name='code' value='500'/>
                                                <parameter name='message' value='Error Getting Info from ConfigDB. Aborting RPC executiopn'/>
                                            </return>
                                        </block>
                                    </outcome>
                                    <outcome value='success'>
                                        <block>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="Successfully Obtained List of Cells from ConfigDB"/>
                                                <parameter name="field2" value="`$getListofCells-configdb-response._length`"/>
                                                <parameter name="field3" value="List of Cells in the Tracking Area Relevant for RAN Slice Instantiation "/>
                                            </record>
                                            <for index='idx' start='0' end='`$getListofCells-configdb-response._length `' >
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                    <parameter name='outputPath' value='tmp.trackingarea.cell' />
                                                    <parameter name='source' value="`'getListofCells-configdb-response.[' + $ids + ']'`" />
                                                </execute>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="`$tmp.trackingarea.cell`"/>
                                                </record>
                                            </for>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >
                                                <parameter name='filename' value='/opt/opendaylight/current/data/log/ranSlice-instantiateRANSlice-configrsp-context.log' />
                                            </execute>
                                        </block>
                                    </outcome>
                                </execute>
                            </block>
                            <for index='id1' start='0' end="`$getRIC-configdb-response._length`" >
                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                    <parameter name='outputPath' value='tmp.nearRTRICId' />
                                    <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].nearRTRICId'`" />
                                </execute>
                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                    <parameter name="level" value="info" />
                                    <parameter name="field1" value="Config Payload Entry# "/>
                                    <parameter name="field2" value="`$id1`"/>
                                    <parameter name="field3" value="`$getRIC-configdb-response.[id1].nearRTRICId`"/>
                                    <parameter name="field4" value="`$getRIC-configdb-response.[id1].gNBId`"/>
                                </record>
                                <block atomic='true'>
                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                        <parameter name='outputPath' value='tmp.CUCPListEntries' />
                                        <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList_length'`" />
                                    </execute>
                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                        <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                        <parameter name="level" value="info" />
                                        <parameter name="field1" value="Number of CUCP List Entries "/>
                                        <parameter name="field2" value="`$tmp.CUCPListEntries`"/>
                                    </record>
                                    <block atomic='true'>
                                        <set>
                                            <parameter name='tmp.uLThptPerSlicePerCell' value='5' />
                                        </set>
                                        <switch test='`$tmp.uLThptPerSlicePerCell`'>
                                            <outcome value='5'>
                                                <set>
                                                    <parameter name='tmp.rRMPolicyDedicatedRatio.CellCU' value='10' />
                                                </set>
                                            </outcome>
                                            <outcome value='10'>
                                                <set>
                                                    <parameter name='tmp.rRMPolicyDedicatedRatio.CellCU' value='20' />
                                                </set>
                                            </outcome>
                                        </switch>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="rRMPolicyDedicatedRatio for CellCU "/>
                                            <parameter name="field2" value="`$tmp.rRMPolicyDedicatedRatio.CellCU`"/>
                                        </record>
                                    </block>
                                    <for index='id2' start='0' end='`$tmp.CUCPListEntries`' >
                                        <block atomic='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.cellCUListEntries' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].cellCUList_length'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUCPList.gNBCUName' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].gNBCUName'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUCPList.gNBId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].gNBId'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUCPList.gNBIdLength' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].gNBIdLength'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUCPList.nFType' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].nFType'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUCPList.pLMNId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].pLMNId'`" />
                                            </execute>
                                        </block>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="Numberof cellCU of Entries "/>
                                            <parameter name="field2" value="`$tmp.cellCUListEntries`"/>
                                            <parameter name="field3" value="`$tmp.gNBCUCPList.gNBCUName`"/>
                                            <parameter name="field4" value="`$tmp.gNBCUCPList.gNBId`"/>
                                            <parameter name="field5" value="`$tmp.gNBCUCPList.gNBIdLengthh`"/>
                                            <parameter name="field6" value="`$tmp.gNBCUCPList.nFType`"/>
                                            <parameter name="field7" value="`$tmp.gNBCUCPList.pLMNId`"/>
                                        </record>
                                        <set>
                                            <parameter name='tmp.uLThptPerSlice1' value='`$payloadJson.input.sliceProfile.uLThptPerSlice * 1.1`' />
                                            <parameter name='tmp.uLThptPerSlice' value='`$tmp.uLThptPerSlice1 / $getListofCells-configdb-response._length`' />
                                            <parameter name='tmp.dLThptPerSlice1' value='`$payloadJson.input.sliceProfile.dLThptPerSlice * 1.1`' />
                                            <parameter name='tmp.dLThptPerSlice' value='`$tmp.dLThptPerSlice1 / $getListofCells-configdb-response._length`' />
                                        </set>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="MCC "/>
                                            <parameter name="field2" value="`$tmp.mcc`"/>
                                            <parameter name="field3" value="MNC "/>
                                            <parameter name="field4" value="`$tmp.mnc`"/>
                                            <parameter name="field5" value="Calculated uLThptPerSlice "/>
                                            <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                            <parameter name="field7" value="Calculated dLThptPerSlice "/>
                                            <parameter name="field8" value="`$tmp.dLThptPerSlice`"/>
                                        </record>
                                        <for index='id3' start='0' end='`$getListofCells-configdb-response._length `' >
                                            <block atomic='true'>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                    <parameter name='outputPath' value='tmp.pLMNInfoListEntries' />
                                                    <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUCPList[' + $id2 + '].cellCUList[' + $id3 + '].pLMNInfoList_length'`" />
                                                </execute>
                                            </block>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.cellLocalId' />
                                                <parameter name='source' value="`'getListofCells-configdb-response.[' + $id3 + ']'`" />
                                            </execute>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="Numberof pLMNInfoList Entries "/>
                                                <parameter name="field2" value="`$tmp.pLMNInfoListEntries`"/>
                                                <parameter name="field3" value="cellLocalId from Relevant cells "/>
                                                <parameter name="field4" value="`$tmp.cellLocalId`"/>
                                            </record>
                                            <for index='id4' start='0' end='`$tmp.pLMNInfoListEntries`' >
                                                <block atomic='true'>
                                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                        <parameter name='outputPath' value='tmp.fromRAN.sNSSAI' />
                                                        <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].cellDUList[' + $id3 + '].pLMNInfoList[' + $id4 + '].sNSSAI.sNSSAI'`" />
                                                    </execute>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                        <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                        <parameter name="level" value="info" />
                                                        <parameter name="field1" value="sNSSAI from RAN to check if already exists "/>
                                                        <parameter name="field2" value="`$tmp.fromRAN.sNSSAI`"/>
                                                    </record>
                                                </block>
                                            </for>
                                            <block atomic='true'>
                                                <switch test='`$prop.ransim-mounted`'>
                                                    <outcome value='false'>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$prop.restapi.addPLMNInfoListEntry.ToNRCellCU`"/>
                                                            <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                            <parameter name="target" value="{idNearRTRIC}"/>
                                                            <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                        </execute>
                                                    </outcome>
                                                    <outcome value='true'>
                                                        <block atomic='true'>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$prop.restapi.addPLMNInfoListEntry.ToNRCellCU.ransim-mounted`"/>
                                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                                <parameter name="target" value="{idNearRTRIC}"/>
                                                                <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                            </execute>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                                <parameter name="target" value="{mountName}"/>
                                                                <parameter name="replacement" value="`$tmp.gNBCUCPList.gNBCUName`"/>
                                                            </execute>
                                                        </block>
                                                    </outcome>
                                                </switch>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{idGNBCUCPFunction}"/>
                                                    <parameter name="replacement" value="`$tmp.gNBCUCPList.gNBCUName`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{idNRCellCU}"/>
                                                    <parameter name="replacement" value="`$tmp.cellLocalId`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{mcc}"/>
                                                    <parameter name="replacement" value="`$tmp.mcc`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{mnc}"/>
                                                    <parameter name="replacement" value="`$tmp.mnc`"/>
                                                </execute>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="Add PLMNInfoListEntry ToNRCellCU URL"/>
                                                    <parameter name="field2" value="`$tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                </record>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="Setting variables for PLMNInfoList Entry Add to NRCellCU"/>
                                                    <parameter name="field2" value="`$prop.controller.url + $tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                    <parameter name="field3" value="`$tmp.mcc`"/>
                                                    <parameter name="field4" value="`$tmp.mnc`"/>
                                                    <parameter name="field5" value="`$payloadJson.input.sliceProfile.sNSSAI`"/>
                                                    <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                                    <parameter name="field7" value="`$tmp.dLThptPerSlice`"/>
                                                </record>
                                                <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                                    <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/ranSlice-add-get-PLMNInfoListEntry-NRCellCU.json'`" />
                                                    <parameter name="restapiUrl" value="`$prop.controller.url + $tmp.addPLMNInfoListEntry.ToNRCellCU.url`"/>
                                                    <parameter name="restapiUser" value="`$prop.controller.user`" />
                                                    <parameter name="restapiPassword" value="`$prop.controller.pwd`"/>
                                                    <parameter name="httpMethod" value="PUT"/>
                                                    <parameter name="responsePrefix" value="PLMNInfoListEntry-response"/>
                                                    <parameter name='contentType' value='application/json' />
                                                    <parameter name='format' value='json' />
                                                    <outcome value='failure'>
                                                        <block>
                                                            <return status='failure'>
                                                                <parameter name='ack-final' value='Y'/>
                                                                <parameter name="error-code" value="500" />
                                                                <parameter name="error-message" value="Error adding PLMNInfoList Entry to NRCellCU" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='success'>
                                                        <block>
                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                                <parameter name="level" value="info" />
                                                                <parameter name="field1" value="PLMNInfo List Entry Add to NRCELLCU Executed Successfully "/>
                                                            </record>
                                                        </block>
                                                    </outcome>
                                                </execute>
                                            </block>
                                            <block atomic='true'>
                                                <switch test='`$prop.ransim-mounted`'>
                                                    <outcome value='false'>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$prop.restapi.addRRMPolicyRatio.ToNRCellCU`"/>
                                                            <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellCU.url"/>
                                                            <parameter name="target" value="{idNearRTRIC}"/>
                                                            <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                        </execute>
                                                    </outcome>
                                                    <outcome value='true'>
                                                        <block atomic='true'>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$prop.restapi.addRRMPolicyRatio.ToNRCellCU.ransim-mounted`"/>
                                                                <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellCU.url"/>
                                                                <parameter name="target" value="{idNearRTRIC}"/>
                                                                <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                            </execute>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                                <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellCU.url"/>
                                                                <parameter name="target" value="{mountName}"/>
                                                                <parameter name="replacement" value="`$tmp.gNBCUCPList.gNBCUName`"/>
                                                            </execute>
                                                        </block>
                                                    </outcome>
                                                </switch>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{idGNBCUCPFunction}"/>
                                                    <parameter name="replacement" value="`$tmp.gNBCUCPList.gNBCUName`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{idNRCellCU}"/>
                                                    <parameter name="replacement" value="`$tmp.cellLocalId`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellCU.url"/>
                                                    <parameter name="target" value="{id}"/>
                                                    <parameter name="replacement" value="0"/>
                                                </execute>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="addRRMPolicyRatio ToNRCellCU URL"/>
                                                    <parameter name="field2" value="`$tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                </record>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="Setting variables for addRRMPolicyRatio to NRCellCU"/>
                                                    <parameter name="field2" value="`$prop.controller.url + $tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                    <parameter name="field3" value="`$tmp.mcc`"/>
                                                    <parameter name="field4" value="`$tmp.mnc`"/>
                                                    <parameter name="field5" value="`$payloadJson.input.sliceProfile.sNSSAI`"/>
                                                    <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                                    <parameter name="field7" value="`$tmp.dLThptPerSlice`"/>
                                                </record>
                                                <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                                    <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/ranSlice-add-RRMPolicyRatio-NRCellCU.json'`" />
                                                    <parameter name="restapiUrl" value="`$prop.controller.url + $tmp.addRRMPolicyRatio.ToNRCellCU.url`"/>
                                                    <parameter name="restapiUser" value="`$prop.controller.user`" />
                                                    <parameter name="restapiPassword" value="`$prop.controller.pwd`"/>
                                                    <parameter name="httpMethod" value="PUT"/>
                                                    <parameter name="responsePrefix" value="addRRMPolicyRatio-response"/>
                                                    <parameter name='contentType' value='application/json' />
                                                    <parameter name='format' value='json' />
                                                    <outcome value='failure'>
                                                        <block>
                                                            <return status='failure'>
                                                                <parameter name='ack-final' value='Y'/>
                                                                <parameter name="error-code" value="500" />
                                                                <parameter name="error-message" value="Error adding RRMPolicyr" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='success'>
                                                        <block>
                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                                <parameter name="level" value="info" />
                                                                <parameter name="field1" value="addRRMPolicyRatio to NRCELLCU Executed Successfully "/>
                                                            </record>
                                                        </block>
                                                    </outcome>
                                                </execute>
                                            </block>
                                        </for>
                                    </for>
                                </block>
                                <block atomic='true'>
                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                        <parameter name='outputPath' value='tmp.CUUPListEntries' />
                                        <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUUPList_length'`" />
                                    </execute>
                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                        <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                        <parameter name="level" value="info" />
                                        <parameter name="field1" value="Number of CUUP List Entries "/>
                                        <parameter name="field2" value="`$tmp.CUUPListEntries`"/>
                                    </record>
                                    <block atomic='true'>
                                        <set>
                                            <parameter name='tmp.uLThptPerSlicePerCell' value='5' />
                                        </set>
                                        <switch test='`$tmp.uLThptPerSlicePerCell`'>
                                            <outcome value='5'>
                                                <set>
                                                    <parameter name='tmp.rRMPolicyDedicatedRatio.CUUP' value='10' />
                                                </set>
                                            </outcome>
                                            <outcome value='10'>
                                                <set>
                                                    <parameter name='tmp.rRMPolicyDedicatedRatio.CUUP' value='20' />
                                                </set>
                                            </outcome>
                                        </switch>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="rRMPolicyDedicatedRatio for CUUP "/>
                                            <parameter name="field2" value="`$tmp.rRMPolicyDedicatedRatio.CUUP`"/>
                                        </record>
                                    </block>
                                    <for index='id2' start='0' end='`$tmp.CUCPListEntries `' >
                                        <block atomic='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUUPList.gNBCUUPId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUUPList[' + $id2 + '].gNBCUUPId'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUUPList.gNBId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUUPList[' + $id2 + '].gNBId'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBCUUPList.gNBIdLength' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUUPList[' + $id2 + '].gNBIdLength'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.pLMNInfoListEntries' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUUPList[' + $id2 + '].pLMNInfoList_length'`" />
                                            </execute>
                                        </block>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="CUCP Details "/>
                                            <parameter name="field2" value="`$tmp.gNBCUUPList.gNBCUUPId`"/>
                                            <parameter name="field3" value="`$tmp.gNBCUUPList.gNBId`"/>
                                            <parameter name="field4" value="`$tmp.gNBCUUPList.gNBIdLength`"/>
                                            <parameter name="field5" value="`$tmp.gNBCUUPList.pLMNInfoList_length`"/>
                                            <parameter name="field6" value="`$tmp.gNBCUUPList.pLMNId`"/>
                                        </record>
                                        <set>
                                            <parameter name='tmp.uLThptPerSlice1' value='`$payloadJson.input.sliceProfile.uLThptPerSlice * 1.1`' />
                                            <parameter name='tmp.uLThptPerSlice' value='`$tmp.uLThptPerSlice1 / $tmp.cellCUListEntries`' />
                                            <parameter name='tmp.dLThptPerSlice1' value='`$payloadJson.input.sliceProfile.dLThptPerSlice * 1.1`' />
                                            <parameter name='tmp.dLThptPerSlice' value='`$tmp.dLThptPerSlice1 / $tmp.cellCUListEntries`' />
                                        </set>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="MCC "/>
                                            <parameter name="field2" value="`$tmp.mcc`"/>
                                            <parameter name="field3" value="MNC "/>
                                            <parameter name="field4" value="`$tmp.mnc`"/>
                                            <parameter name="field5" value="Calculated uLThptPerSlice "/>
                                            <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                            <parameter name="field7" value="Calculated dLThptPerSlice "/>
                                            <parameter name="field8" value="`$tmp.dLThptPerSlice`"/>
                                        </record>
                                        <for index='id4' start='0' end='`$tmp.pLMNInfoListEntries`' >
                                            <block atomic='true'>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                    <parameter name='outputPath' value='tmp.fromRAN.sNSSAI' />
                                                    <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBCUUPList[' + $id2 + '].pLMNInfoList[' + $id3 + '].sNSSAI'`" />
                                                </execute>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="sNSSAI from RAN to check if already exists "/>
                                                    <parameter name="field2" value="`$tmp.fromRAN.sNSSAI`"/>
                                                </record>
                                            </block>
                                        </for>
                                        <block atomic='true'>
                                            <switch test='`$prop.ransim-mounted`'>
                                                <outcome value='false'>
                                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                        <parameter name="source" value="`$prop.restapi.addPLMNInfoListEntry.ToGNBCUUPFn`"/>
                                                        <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url"/>
                                                        <parameter name="target" value="{idNearRTRIC}"/>
                                                        <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                    </execute>
                                                </outcome>
                                                <outcome value='true'>
                                                    <block atomic='true'>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$prop.restapi.addPLMNInfoListEntry.ToGNBCUUPFn.ransim-mounted`"/>
                                                            <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url"/>
                                                            <parameter name="target" value="{idNearRTRIC}"/>
                                                            <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                        </execute>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url`"/>
                                                            <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url"/>
                                                            <parameter name="target" value="{mountName}"/>
                                                            <parameter name="replacement" value="`$tmp.gNBCUUPList.gNBCUUPId`"/>
                                                        </execute>
                                                    </block>
                                                </outcome>
                                            </switch>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url`"/>
                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url"/>
                                                <parameter name="target" value="{idGNBCUUPFunction}"/>
                                                <parameter name="replacement" value="`$tmp.gNBCUUPList.gNBCUUPId`"/>
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url`"/>
                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url"/>
                                                <parameter name="target" value="{mcc}"/>
                                                <parameter name="replacement" value="`$tmp.mcc`"/>
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url`"/>
                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url"/>
                                                <parameter name="target" value="{mnc}"/>
                                                <parameter name="replacement" value="`$tmp.mnc`"/>
                                            </execute>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="Add PLMNInfoListEntry ToGNBCUUPFn URL"/>
                                                <parameter name="field2" value="`$tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url`"/>
                                            </record>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="Setting variables for PLMNInfoList Entry Add to NRCellCU"/>
                                                <parameter name="field2" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                <parameter name="field3" value="`$tmp.mcc`"/>
                                                <parameter name="field4" value="`$tmp.mnc`"/>
                                                <parameter name="field5" value="`$payloadJson.input.sliceProfile.sNSSAI`"/>
                                                <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                                <parameter name="field7" value="`$tmp.dLThptPerSlice`"/>
                                            </record>
                                            <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                                <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/ranSlice-add-get-PLMNInfoListEntry-GNBCUUPFn.json'`" />
                                                <parameter name="restapiUrl" value="`$prop.controller.url + $tmp.addPLMNInfoListEntry.ToGNBCUUPFn.url`"/>
                                                <parameter name="restapiUser" value="`$prop.controller.user`" />
                                                <parameter name="restapiPassword" value="`$prop.controller.pwd`"/>
                                                <parameter name="httpMethod" value="PUT"/>
                                                <parameter name="responsePrefix" value="PLMNInfoListEntry-response"/>
                                                <parameter name='contentType' value='application/json' />
                                                <parameter name='format' value='json' />
                                                <outcome value='failure'>
                                                    <block>
                                                        <return status='failure'>
                                                            <parameter name='ack-final' value='Y'/>
                                                            <parameter name="error-code" value="500" />
                                                            <parameter name="error-message" value="Error adding PLMNInfoList Entry to GNBCUUPFn" />
                                                        </return>
                                                    </block>
                                                </outcome>
                                                <outcome value='success'>
                                                    <block>
                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                            <parameter name="level" value="info" />
                                                            <parameter name="field1" value="PLMNInfo List Entry Add Executed Successfully "/>
                                                        </record>
                                                    </block>
                                                </outcome>
                                            </execute>
                                        </block>
                                        <block atomic='true'>
                                            <switch test='`$prop.ransim-mounted`'>
                                                <outcome value='false'>
                                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                        <parameter name="source" value="`$prop.restapi.addRRMPolicyRatio.ToGNBCUUPFn`"/>
                                                        <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToGNBCUUPFn.url"/>
                                                        <parameter name="target" value="{idNearRTRIC}"/>
                                                        <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                    </execute>
                                                </outcome>
                                                <outcome value='true'>
                                                    <block atomic='true'>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$prop.restapi.addRRMPolicyRatio.ToGNBCUUPFn.ransim-mounted`"/>
                                                            <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToGNBCUUPFn.url"/>
                                                            <parameter name="target" value="{idNearRTRIC}"/>
                                                            <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                        </execute>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToGNBCUUPFn.url`"/>
                                                            <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToGNBCUUPFn.url"/>
                                                            <parameter name="target" value="{mountName}"/>
                                                            <parameter name="replacement" value="`$tmp.gNBCUUPList.gNBCUUPId`"/>
                                                        </execute>
                                                    </block>
                                                </outcome>
                                            </switch>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToGNBCUUPFn.url`"/>
                                                <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToGNBCUUPFn.url"/>
                                                <parameter name="target" value="{idGNBCUUPFunction}"/>
                                                <parameter name="replacement" value="`$tmp.gNBCUUPList.gNBCUUPId`"/>
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToGNBCUUPFn.url`"/>
                                                <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToGNBCUUPFn.url"/>
                                                <parameter name="target" value="{id}"/>
                                                <parameter name="replacement" value="0"/>
                                            </execute>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="addRRMPolicyRatio ToGNBCUUPFn URL"/>
                                                <parameter name="field2" value="`$tmp.addRRMPolicyRatio.ToGNBCUUPFn.url`"/>
                                            </record>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="Setting variables for addRRMPolicyRatio to GNBCUUPFn"/>
                                                <parameter name="field2" value="`$tmp.addRRMPolicyRatio.ToGNBCUUPFn.url`"/>
                                                <parameter name="field3" value="`$tmp.mcc`"/>
                                                <parameter name="field4" value="`$tmp.mnc`"/>
                                                <parameter name="field5" value="`$payloadJson.input.sliceProfile.sNSSAI`"/>
                                                <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                                <parameter name="field7" value="`$tmp.dLThptPerSlice`"/>
                                            </record>
                                            <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                                <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/ranSlice-add-RRMPolicyRatio-GNBCUUPFn.json'`" />
                                                <parameter name="restapiUrl" value="`$prop.controller.url + $tmp.addRRMPolicyRatio.ToGNBCUUPFn.url`"/>
                                                <parameter name="restapiUser" value="`$prop.controller.user`" />
                                                <parameter name="restapiPassword" value="`$prop.controller.pwd`"/>
                                                <parameter name="httpMethod" value="PUT"/>
                                                <parameter name="responsePrefix" value="addRRMPolicyRatio-response"/>
                                                <parameter name='contentType' value='application/json' />
                                                <parameter name='format' value='json' />
                                                <outcome value='failure'>
                                                    <block>
                                                        <return status='failure'>
                                                            <parameter name='ack-final' value='Y'/>
                                                            <parameter name="error-code" value="500" />
                                                            <parameter name="error-message" value="Error adding RRMPolicy" />
                                                        </return>
                                                    </block>
                                                </outcome>
                                                <outcome value='success'>
                                                    <block>
                                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                            <parameter name="level" value="info" />
                                                            <parameter name="field1" value="addRRMPolicyRatio Executed Successfully "/>
                                                        </record>
                                                    </block>
                                                </outcome>
                                            </execute>
                                        </block>
                                    </for>
                                </block>
                                <block atomic='true'>
                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                        <parameter name='outputPath' value='tmp.DUListEntries' />
                                        <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList_length'`" />
                                    </execute>
                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                        <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                        <parameter name="level" value="info" />
                                        <parameter name="field1" value="Number of DU List Entries "/>
                                        <parameter name="field2" value="`$tmp.DUListEntries`"/>
                                    </record>
                                    <block atomic='true'>
                                        <set>
                                            <parameter name='tmp.uLThptPerSlicePerCell' value='5' />
                                        </set>
                                        <switch test='`$tmp.uLThptPerSlicePerCell`'>
                                            <outcome value='5'>
                                                <set>
                                                    <parameter name='tmp.rRMPolicyDedicatedRatio.CellDU' value='10' />
                                                </set>
                                            </outcome>
                                            <outcome value='10'>
                                                <set>
                                                    <parameter name='tmp.rRMPolicyDedicatedRatio.CellDU' value='20' />
                                                </set>
                                            </outcome>
                                        </switch>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="rRMPolicyDedicatedRatio for CellDU "/>
                                            <parameter name="field2" value="`$tmp.rRMPolicyDedicatedRatio.CellDU`"/>
                                        </record>
                                    </block>
                                    <for index='id2' start='0' end='`$tmp.DUListEntries`' >
                                        <block atomic='true'>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.cellDUListEntries' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].cellDUList_length'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBDUList.gNBDUId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].gNBDUId'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBDUName' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].gNBDUName'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].gNBId'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.gNBIdLength' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].gNBIdLength'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.nFType' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].nFType'`" />
                                            </execute>
                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                <parameter name='outputPath' value='tmp.pLMNId' />
                                                <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].pLMNId'`" />
                                            </execute>
                                        </block>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="Numberof cellDU of Entries "/>
                                            <parameter name="field2" value="`$tmp.cellDUListEntries`"/>
                                            <parameter name="field3" value="`$tmp.gNBDUList.gNBDUId`"/>
                                            <parameter name="field4" value="`$tmp.gNBDUName`"/>
                                            <parameter name="field5" value="`$tmp.gNBId`"/>
                                            <parameter name="field6" value="`$tmp.gNBIdLength`"/>
                                            <parameter name="field7" value="`$tmp.nFType`"/>
                                            <parameter name="field8" value="`$tmp.pLMNId`"/>
                                        </record>
                                        <set>
                                            <parameter name='tmp.uLThptPerSlice1' value='`$payloadJson.input.sliceProfile.uLThptPerSlice * 1.1`' />
                                            <parameter name='tmp.uLThptPerSlice' value='`$tmp.uLThptPerSlice1 / $tmp.cellDUListEntries`' />
                                            <parameter name='tmp.dLThptPerSlice1' value='`$payloadJson.input.sliceProfile.dLThptPerSlice * 1.1`' />
                                            <parameter name='tmp.dLThptPerSlice' value='`$tmp.dLThptPerSlice1 / $tmp.cellDUListEntries`' />
                                        </set>
                                        <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                            <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                            <parameter name="level" value="info" />
                                            <parameter name="field1" value="MCC "/>
                                            <parameter name="field2" value="`$tmp.mcc`"/>
                                            <parameter name="field3" value="MNC "/>
                                            <parameter name="field4" value="`$tmp.mnc`"/>
                                            <parameter name="field5" value="Calculated uLThptPerSlice "/>
                                            <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                            <parameter name="field7" value="Calculated dLThptPerSlice "/>
                                            <parameter name="field8" value="`$tmp.dLThptPerSlice`"/>
                                        </record>
                                        <for index='id3' start='0' end='`$getListofCells-configdb-response._length `' >
                                            <block atomic='true'>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                    <parameter name='outputPath' value='tmp.pLMNInfoListEntries' />
                                                    <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].cellDUList[' + $id3 + '].pLMNInfoList_length'`" />
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                    <parameter name='outputPath' value='tmp.cellLocalId' />
                                                    <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].cellDUList[' + $id3 + '].cellLocalId'`" />
                                                </execute>
                                            </block>
                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                <parameter name="level" value="info" />
                                                <parameter name="field1" value="Numberof pLMNInfoList Entries "/>
                                                <parameter name="field2" value="`$tmp.pLMNInfoListEntries`"/>
                                                <parameter name="field3" value="cellLocalId "/>
                                                <parameter name="field4" value="`$tmp.cellLocalId`"/>
                                            </record>
                                            <for index='id4' start='0' end='`$tmp.pLMNInfoListEntries`' >
                                                <block atomic='true'>
                                                    <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='getAttributeValue'>
                                                        <parameter name='outputPath' value='tmp.fromRAN.sNSSAI' />
                                                        <parameter name='source' value="`'getRIC-configdb-response.[' + $id1 + '].gNBDUList[' + $id2 + '].cellDUList[' + $id3 + '].pLMNInfoList[' + $id4 + '].sNSSAI.sNSSAI'`" />
                                                    </execute>
                                                    <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                        <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                        <parameter name="level" value="info" />
                                                        <parameter name="field1" value="sNSSAI from RAN to check if already exists "/>
                                                        <parameter name="field2" value="`$tmp.fromRAN.sNSSAI`"/>
                                                    </record>
                                                </block>
                                            </for>
                                            <block atomic='true'>
                                                <switch test='`$prop.ransim-mounted`'>
                                                    <outcome value='false'>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$prop.restapi.addPLMNInfoListEntry.ToNRCellDU`"/>
                                                            <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                            <parameter name="target" value="{idNearRTRIC}"/>
                                                            <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                        </execute>
                                                    </outcome>
                                                    <outcome value='true'>
                                                        <block atomic='true'>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$prop.restapi.addPLMNInfoListEntry.ToNRCellDU.ransim-mounted`"/>
                                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                                <parameter name="target" value="{idNearRTRIC}"/>
                                                                <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                            </execute>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                                <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                                <parameter name="target" value="{mountName}"/>
                                                                <parameter name="replacement" value="`$tmp.gNBDUList.gNBDUId`"/>
                                                            </execute>
                                                        </block>
                                                    </outcome>
                                                </switch>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{idGNBDUFunction}"/>
                                                    <parameter name="replacement" value="`$tmp.gNBDUList.gNBDUId`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{idNRCellDU}"/>
                                                    <parameter name="replacement" value="`$tmp.cellLocalId`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{mcc}"/>
                                                    <parameter name="replacement" value="`$tmp.mcc`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addPLMNInfoListEntry.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{mnc}"/>
                                                    <parameter name="replacement" value="`$tmp.mnc`"/>
                                                </execute>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="Add PLMNInfoListEntry ToNRCellDU URL"/>
                                                    <parameter name="field2" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                </record>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="Setting variables for PLMNInfoList Entry Add to NRCellDU"/>
                                                    <parameter name="field2" value="`$tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                    <parameter name="field3" value="`$tmp.mcc`"/>
                                                    <parameter name="field4" value="`$tmp.mnc`"/>
                                                    <parameter name="field5" value="`$payloadJson.input.sliceProfile.sNSSAI`"/>
                                                    <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                                    <parameter name="field7" value="`$tmp.dLThptPerSlice`"/>
                                                </record>
                                                <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                                    <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/ranSlice-add-get-PLMNInfoListEntry-NRCellDU.json'`" />
                                                    <parameter name="restapiUrl" value="`$prop.controller.url + $tmp.addPLMNInfoListEntry.ToNRCellDU.url`"/>
                                                    <parameter name="restapiUser" value="`$prop.controller.user`" />
                                                    <parameter name="restapiPassword" value="`$prop.controller.pwd`"/>
                                                    <parameter name="httpMethod" value="PUT"/>
                                                    <parameter name="responsePrefix" value="PLMNInfoListEntry-response"/>
                                                    <parameter name='contentType' value='application/json' />
                                                    <parameter name='format' value='json' />
                                                    <outcome value='failure'>
                                                        <block>
                                                            <return status='failure'>
                                                                <parameter name='ack-final' value='Y'/>
                                                                <parameter name="error-code" value="500" />
                                                                <parameter name="error-message" value="Error adding PLMNInfo List Entry to NRCellCUr" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='success'>
                                                        <block>
                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                                <parameter name="level" value="info" />
                                                                <parameter name="field1" value="PLMNInfo List Entry Add to NRCELLDU Executed Successfully "/>
                                                            </record>
                                                        </block>
                                                    </outcome>
                                                </execute>
                                            </block>
                                            <block atomic='true'>
                                                <switch test='`$prop.ransim-mounted`'>
                                                    <outcome value='false'>
                                                        <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                            <parameter name="source" value="`$prop.restapi.addRRMPolicyRatio.ToNRCellDU`"/>
                                                            <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellDU.url"/>
                                                            <parameter name="target" value="{idNearRTRIC}"/>
                                                            <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                        </execute>
                                                    </outcome>
                                                    <outcome value='true'>
                                                        <block atomic='true'>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$prop.restapi.addRRMPolicyRatio.ToNRCellDU.ransim-mounted`"/>
                                                                <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellDU.url"/>
                                                                <parameter name="target" value="{idNearRTRIC}"/>
                                                                <parameter name="replacement" value="`$tmp.nearRTRICId`"/>
                                                            </execute>
                                                            <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                                <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                                <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellDU.url"/>
                                                                <parameter name="target" value="{mountName}"/>
                                                                <parameter name="replacement" value="`$tmp.gNBDUList.gNBDUId`"/>
                                                            </execute>
                                                        </block>
                                                    </outcome>
                                                </switch>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{idGNBDUFunction}"/>
                                                    <parameter name="replacement" value="`$tmp.gNBDUList.gNBDUId`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{idNRCellDU}"/>
                                                    <parameter name="replacement" value="`$tmp.cellLocalId`"/>
                                                </execute>
                                                <execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >
                                                    <parameter name="source" value="`$tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                    <parameter name="outputPath" value="tmp.addRRMPolicyRatio.ToNRCellDU.url"/>
                                                    <parameter name="target" value="{id}"/>
                                                    <parameter name="replacement" value="0"/>
                                                </execute>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="addRRMPolicyRatio ToNRCellDU URL"/>
                                                    <parameter name="field2" value="`$tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                </record>
                                                <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                    <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                    <parameter name="level" value="info" />
                                                    <parameter name="field1" value="Setting variables for addRRMPolicyRatio to NRCellDU"/>
                                                    <parameter name="field2" value="`$tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                    <parameter name="field3" value="`$tmp.mcc`"/>
                                                    <parameter name="field4" value="`$tmp.mnc`"/>
                                                    <parameter name="field5" value="`$payloadJson.input.sliceProfile.sNSSAI`"/>
                                                    <parameter name="field6" value="`$tmp.uLThptPerSlice`"/>
                                                    <parameter name="field7" value="`$tmp.dLThptPerSlice`"/>
                                                </record>
                                                <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >
                                                    <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/ranSlice-add-RRMPolicyRatio-NRCellDU.json'`" />
                                                    <parameter name="restapiUrl" value="`$prop.controller.url + $tmp.addRRMPolicyRatio.ToNRCellDU.url`"/>
                                                    <parameter name="restapiUser" value="`$prop.controller.user`" />
                                                    <parameter name="restapiPassword" value="`$prop.controller.pwd`"/>
                                                    <parameter name="httpMethod" value="PUT"/>
                                                    <parameter name="responsePrefix" value="addRRMPolicyRatio-response"/>
                                                    <parameter name='contentType' value='application/json' />
                                                    <parameter name='format' value='json' />
                                                    <outcome value='failure'>
                                                        <block>
                                                            <return status='failure'>
                                                                <parameter name='ack-final' value='Y'/>
                                                                <parameter name="error-code" value="500" />
                                                                <parameter name="error-message" value="Error adding RRM Policy" />
                                                            </return>
                                                        </block>
                                                    </outcome>
                                                    <outcome value='success'>
                                                        <block>
                                                            <record plugin="org.onap.ccsdk.sli.core.sli.recording.FileRecorder">
                                                                <parameter name="file" value="/opt/opendaylight/current/data/log/instantiateRANSlice.log" />
                                                                <parameter name="level" value="info" />
                                                                <parameter name="field1" value="addRRMPolicyRatio to NRCELLDU Executed Successfully "/>
                                                            </record>
                                                        </block>
                                                    </outcome>
                                                </execute>
                                            </block>
                                        </for>
                                    </for>
                                </block>
                            </for>
                        </block>
                    </block>
                </outcome>
            </switch>
            <return status='success'>
                <parameter name="ack-final-indicator" value="Y" />
                <parameter name="error-code" value="200" />
                <parameter name="error-message" value="SUCCESSFUL Execution" />
            </return>
        </block>
    </method>
</service-logic>
