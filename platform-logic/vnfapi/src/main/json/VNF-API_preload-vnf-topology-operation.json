[{"id":"801f066a.b0dc78","type":"dgstart","name":"DGSTART","outputs":1,"x":157.14285278320312,"y":142.85714721679688,"z":"af933c87.e6ed2","wires":[["e18183e1.8fe97"]]},{"id":"e18183e1.8fe97","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":190.1428680419922,"y":193.96824645996094,"z":"af933c87.e6ed2","wires":[["c2c81abc.5ef068"]]},{"id":"c2c81abc.5ef068","type":"method","name":"preload-vnf-topology-operation","xml":"<method rpc=\"preload-vnf-topology-operation\" mode=\"sync\">","comments":"","outputs":1,"x":277.4761962890625,"y":239.079345703125,"z":"af933c87.e6ed2","wires":[["d99d320d.a2f5b"]]},{"id":"d99d320d.a2f5b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":205.36505126953125,"y":392.5238037109375,"z":"af933c87.e6ed2","wires":[["32a6de67.f9d9c2"]]},{"id":"fbc3b2b4.65da","type":"comment","name":"preload-vnf-topology-operation","info":"","comments":"","x":738.8550224304199,"y":149.624831199646,"z":"af933c87.e6ed2","wires":[]},{"id":"4ac1b7d7.ddfd18","type":"comment","name":"request-action = PreloadVNFRequest, svc-action = reserve","info":"","comments":"","x":747.6428489685059,"y":187.30159378051758,"z":"af933c87.e6ed2","wires":[]},{"id":"32a6de67.f9d9c2","type":"switchNode","name":"switch: request-action","xml":"<switch test=\"`$preload-vnf-topology-operation-input.request-information.request-action`\">\n<!--\nleaf request-action { \n\t\t\t\ttype enumeration { \n\t\t\t\t\tenum \"VNFActivateRequest\";\n\t\t\t\t\tenum \"ChangeVNFActivateRequest\";\n\t\t\t\t\tenum \"DisconnectVNFRequest\";\n\t\t\t\t\tenum \"PreloadVNFRequest\";\n\t\t\t\t\tenum \"DeletePreloadVNFRequest\";\n\t\t\t\t} \n}\n-->\n\n","comments":"","outputs":1,"x":472.1428527832031,"y":412.6248321533203,"z":"af933c87.e6ed2","wires":[["746b551f.5d126c","e0847cbc.ccd41","8a159dc0.caad9"]]},{"id":"746b551f.5d126c","type":"other","name":"PreloadVNFRequest","xml":"<outcome value='PreloadVNFRequest'>","comments":"","outputs":1,"x":700.1428527832031,"y":413.6248321533203,"z":"af933c87.e6ed2","wires":[["dc3995bf.89a618"]]},{"id":"e0847cbc.ccd41","type":"other","name":"DeletePreloadVNFRequest","xml":"<outcome value='DeletePreloadVNFRequest'>","comments":"","outputs":1,"x":701.7141647338867,"y":787.4819803237915,"z":"af933c87.e6ed2","wires":[["35c06d75.3e6e22"]]},{"id":"d673e349.801f1","type":"set","name":"Delete Preload Data","xml":"<set>\n<parameter name=\"preload-data.\" value=\"\" />\n","comments":"","x":1171.7141647338867,"y":829.4819803237915,"z":"af933c87.e6ed2","wires":[]},{"id":"15c1623d.0bf0de","type":"returnSuccess","name":"return success","xml":"<return status=\"success\">\n\t<parameter name=\"error-code\" value=\"200\" />","comments":"","x":1154.7141647338867,"y":869.4819803237915,"z":"af933c87.e6ed2","wires":[]},{"id":"8a159dc0.caad9","type":"other","name":"outcome: Other","xml":"<outcome value=\"Other\">\n\n","outputs":1,"x":669.7141647338867,"y":907.4819803237915,"z":"af933c87.e6ed2","wires":[["3fdbbdcc.ec8552"]]},{"id":"3fdbbdcc.ec8552","type":"returnFailure","name":"return failure","xml":" <return status=\"failure\">\n\t<parameter name='error-code' value='2000'/>\n\t<parameter name='error-message' value='Invalid Request `$preload-vnf-topology-operation-input.request-information.request-action`'/>\n\n \n","comments":"","x":911.796257019043,"y":905.9452981948853,"z":"af933c87.e6ed2","wires":[]},{"id":"dc3995bf.89a618","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":940.1428527832031,"y":412.6248321533203,"z":"af933c87.e6ed2","wires":[["80277d89.896ec","17222165.cf338f","8a225617.3f8438","6c2d3b1f.113b84","ed4d291e.10d3c8","336476ae.fb219a","8681604e.8241e"]]},{"id":"336476ae.fb219a","type":"returnSuccess","name":"return success","xml":"<return status=\"success\">\n\t<parameter name=\"error-code\" value=\"200\" />","comments":"","x":1198.1428985595703,"y":649.0534019470215,"z":"af933c87.e6ed2","wires":[]},{"id":"ed4d291e.10d3c8","type":"set","name":"set: order-status = PendingAssignment","xml":"<set>\n\t<parameter name=\"preload-data.oper-status.order-status\" value=\"PendingAssignment\"/>","comments":"","x":1273.1668243408203,"y":609.1408348083496,"z":"af933c87.e6ed2","wires":[]},{"id":"80277d89.896ec","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":1219.0517196655273,"y":411.77573585510254,"z":"af933c87.e6ed2","wires":[]},{"id":"8a225617.3f8438","type":"get-resource","name":"get-resource: vnf-profile.vnf-type","xml":"<get-resource plugin=\"`$sql-resource-plugin`\" resource=\"vnf-profile\" key=\"SELECT * from VNF_PROFILE WHERE vnf_type = $preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.vnf-type\">\n","comments":"","outputs":1,"x":1251.662986755371,"y":491.2202548980713,"z":"af933c87.e6ed2","wires":[["b689b3e9.ba446","5c0513ef.b3e9ec"]]},{"id":"4b4f249d.14da3c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"preload vnf-type not found as valid vnf \" />","comments":"","x":1741.9961776733398,"y":490.4424228668213,"z":"af933c87.e6ed2","wires":[]},{"id":"b689b3e9.ba446","type":"success","name":"not found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1528.6629257202148,"y":490.9979648590088,"z":"af933c87.e6ed2","wires":[["4b4f249d.14da3c"]]},{"id":"17222165.cf338f","type":"set","name":"set : sql-resource-plugin","xml":"<set only-if-unset=\"true\">\n<parameter name=\"sql-resource-plugin\" value=\"org.openecomp.sdnc.sli.resource.sql.SqlResource\"/>","comments":"","x":1239.8749618530273,"y":450.65452003479004,"z":"af933c87.e6ed2","wires":[]},{"id":"6c2d3b1f.113b84","type":"set","name":"set: preload-data += input","xml":"<set>\n<parameter name=\"preload-data.\" value=\"preload-vnf-topology-operation-input.\" />\n","comments":"","x":1231.083511352539,"y":569.6862754821777,"z":"af933c87.e6ed2","wires":[]},{"id":"5c0513ef.b3e9ec","type":"success","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1520.9406356811523,"y":532.543436050415,"z":"af933c87.e6ed2","wires":[["4b4f249d.14da3c"]]},{"id":"35c06d75.3e6e22","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":940.7141647338867,"y":788.4819803237915,"z":"af933c87.e6ed2","wires":[["79961f40.3cf","d673e349.801f1","15c1623d.0bf0de"]]},{"id":"79961f40.3cf","type":"get-resource","name":"get-resource: vnf-profile.vnf-type","xml":"<get-resource plugin=\"`$sql-resource-plugin`\" resource=\"generic-vnf\" key=\"SELECT * FROM VNF_PROFILE vnf-type = $preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.vnf-type\">\n","comments":"","outputs":1,"x":1209.7141647338867,"y":788.4819803237915,"z":"af933c87.e6ed2","wires":[["1fd023bc.5199cc"]]},{"id":"1fd023bc.5199cc","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1476.7141647338867,"y":787.4819803237915,"z":"af933c87.e6ed2","wires":[["b6d0d5d9.aebe58"]]},{"id":"b6d0d5d9.aebe58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name=\"error-code\" value=\"3000\" />\n\t<parameter name=\"error-message\" value=\"preload vnf-type cannot be deleted while vnf is in use\" />","comments":"","x":1690.7141647338867,"y":787.4819803237915,"z":"af933c87.e6ed2","wires":[]},{"id":"9e800613.ce4818","type":"comment","name":"request-action = DeletePreloadVNFRequest, svc-action = delete","info":"","comments":"","x":756.1428527832031,"y":224.6248321533203,"z":"af933c87.e6ed2","wires":[]},{"id":"8681604e.8241e","type":"set","name":"Delete Preload Data","xml":"<set>\n<parameter name=\"preload-data.\" value=\"\" />\n","comments":"","x":1213.8571548461914,"y":529.857177734375,"z":"af933c87.e6ed2","wires":[]}]