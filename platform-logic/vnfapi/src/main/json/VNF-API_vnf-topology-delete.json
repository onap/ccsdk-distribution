[
    {
        "id": "708f9f60.b1b",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n\t<parameter name=\"error-code\" value=\"200\" />",
        "comments": "",
        "x": 425.4320831298828,
        "y": 578.3055973052979,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "237e95c1.a3bd4a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 202.4320297241211,
        "y": 171.8888864517212,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "989753b1.14334",
                "708f9f60.b1b",
                "af6f4fd2.ed4a",
                "edddc577.9baf38",
                "5e0a89d0.58c1a8",
                "8e21b6e.34d7548",
                "19c37308.a9d61d",
                "d46e73ef.6e8c1"
            ]
        ]
    },
    {
        "id": "989753b1.14334",
        "type": "set",
        "name": "set: order-status = Deleted",
        "xml": "<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"Deleted\"/>",
        "comments": "",
        "x": 466.4320831298828,
        "y": 405.30559730529785,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "39154674.c0751a",
        "type": "method",
        "name": "method vnf-topology-delete",
        "xml": "<method rpc='vnf-topology-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 234.09871673583984,
        "y": 121.05555057525635,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "237e95c1.a3bd4a"
            ]
        ]
    },
    {
        "id": "33be7113.0fa75e",
        "type": "service-logic",
        "name": "VNF-API ${project.version}",
        "module": "VNF-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>",
        "outputs": 1,
        "x": 350.7653503417969,
        "y": 69.05556106567383,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "39154674.c0751a"
            ]
        ]
    },
    {
        "id": "fb046bf4.0e07e8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 140.9320297241211,
        "y": 68.88888645172119,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "33be7113.0fa75e"
            ]
        ]
    },
    {
        "id": "14ee4185.d94a2e",
        "type": "other",
        "name": "false",
        "xml": "<outcome value='false'>",
        "comments": "",
        "outputs": 1,
        "x": 1129.356357574463,
        "y": 253.3510227203369,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "95ad750b.27f1e8"
            ]
        ]
    },
    {
        "id": "95ad750b.27f1e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Invalid order-status'/>",
        "comments": "",
        "x": 1281.6894874572754,
        "y": 253.35108375549316,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "5e0a89d0.58c1a8",
        "type": "set",
        "name": "set: last-action ",
        "xml": "<set>\n\t<parameter name=\"service-data.oper-status.last-action\" value=\"`$service-data.request-information.request-action`\"/>",
        "comments": "",
        "x": 427.68968200683594,
        "y": 448.8511905670166,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "af6f4fd2.ed4a",
        "type": "switchNode",
        "name": "switch:vnf-id   config == input",
        "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id == $service-data.vnf-id`\">",
        "comments": "",
        "outputs": 1,
        "x": 471.575927734375,
        "y": 171.37643146514893,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "fd98c370.2db85"
            ]
        ]
    },
    {
        "id": "fd98c370.2db85",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 673.0304870605469,
        "y": 171.55825901031494,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "957a2f6d.be384"
            ]
        ]
    },
    {
        "id": "957a2f6d.be384",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-id not found'/>",
        "comments": "",
        "x": 836.6214065551758,
        "y": 171.71735954284668,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "edddc577.9baf38",
        "type": "set",
        "name": "set: last-order-status = order-status",
        "xml": "<set>\n\t<parameter name=\"service-data.oper-status.last-order-status\" value=\"`$service-data.oper-status.order-status`\"/>",
        "comments": "",
        "x": 492.82603454589844,
        "y": 364.04314613342285,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "8e21b6e.34d7548",
        "type": "set",
        "name": "Clear vnf topology",
        "xml": "<set>\n\t<parameter name=\"service-data.\" value=\"\" /> \n",
        "comments": "",
        "x": 436.82603454589844,
        "y": 489.04314613342285,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "d113d476.f18958",
        "type": "switchNode",
        "name": "switch: order-status = Active",
        "xml": "<switch test=\"`$service-data.oper-status.order-status == Active`\">",
        "comments": "",
        "outputs": 1,
        "x": 927.5392570495605,
        "y": 253.65082359313965,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "14ee4185.d94a2e"
            ]
        ]
    },
    {
        "id": "d46e73ef.6e8c1",
        "type": "set",
        "name": "Set final indicator to Y",
        "xml": "<set>\n<parameter name=\"ack-final\" value=\"Y\"/>",
        "comments": "",
        "x": 448.14640045166016,
        "y": 534.2460708618164,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "19c37308.a9d61d",
        "type": "switchNode",
        "name": "switch: INPUT aic-cloud-region",
        "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-request-information.aic-cloud-region`\">",
        "comments": "",
        "outputs": 1,
        "x": 480.4320831298828,
        "y": 253.97222518920898,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "2a5a8a8e.704016"
            ]
        ]
    },
    {
        "id": "a7341ebe.65182",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 712.1820793151855,
        "y": 301.6150789260864,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "707c532.d07baac"
            ]
        ]
    },
    {
        "id": "707c532.d07baac",
        "type": "switchNode",
        "name": "switch: INPUT aic-clli",
        "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-request-information.aic-clli`\">",
        "comments": "",
        "outputs": 1,
        "x": 909.1821212768555,
        "y": 301.72224712371826,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "e4a6dc7f.9a579",
                "75bd2a98.3f43e4"
            ]
        ]
    },
    {
        "id": "2a5a8a8e.704016",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 711.6821403503418,
        "y": 253.72223949432373,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "d113d476.f18958"
            ]
        ]
    },
    {
        "id": "e4a6dc7f.9a579",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 1104.1820678710938,
        "y": 302.4722204208374,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "6afa8d4b.3fc5e4"
            ]
        ]
    },
    {
        "id": "6afa8d4b.3fc5e4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Either aic-cloud-region or aic-clli must be present'/>",
        "comments": "",
        "x": 1276.6820678710938,
        "y": 302.9722204208374,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "75bd2a98.3f43e4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105.4320678710938,
        "y": 344.9722204208374,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "ea02cba4.399b88"
            ]
        ]
    },
    {
        "id": "a2aea115.0a314",
        "type": "save",
        "name": "delete generic-vnf-l3-network",
        "xml": "<delete plugin=\"org.openecomp.sdnc.sli.resource.sql.SqlResource\" \n\tresource=\"generic-vnf-l3-network\" \n\tkey=\"DELETE FROM GENERIC_VNF_L3_NETWORK WHERE vnf_id = $service-data.vnf-id\" \n\tforce=\"true\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1227.9320983886719,
        "y": 467.472243309021,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "f95d56cc.7fed28"
            ]
        ]
    },
    {
        "id": "6635778e.a76f48",
        "type": "save",
        "name": "delete GammaResource: generic-vnf",
        "xml": "<delete plugin=\"org.openecomp.sdnc.sli.resource.sql.SqlResource\" \n\tresource=\"generic-vnf\" \n\tkey=\"DELETE FROM GENERIC_VNF where vnf_id = $service-data.vnf-id\" \n\tlocal-only=\"true\" \n\tforce=\"true\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1251.5912628173828,
        "y": 553.8435049057007,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "f95d56cc.7fed28"
            ]
        ]
    },
    {
        "id": "7f88cb67.0cb8a4",
        "type": "save",
        "name": "delete generic-vnf-vserver",
        "xml": "<delete plugin=\"org.openecomp.sdnc.sli.resource.sql.SqlResource\" \n\tresource=\"generic-vnf-vserver\" \n\tkey=\"DELETE FROM GENERIC_VNF_VSERVER where vnf_id = $service-data.vnf-id\" \n\tforce=\"true\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1219.3412628173828,
        "y": 508.9267873764038,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "f95d56cc.7fed28"
            ]
        ]
    },
    {
        "id": "7a91b73a.5b45a8",
        "type": "switchNode",
        "name": "switch: order-status = PendingDelete",
        "xml": "<switch test=\"'$service-data.oper-status.order-status == PendingDelete'\">\n\n<!--\nleaf order-status {\n\ttype enumeration {\n\t\tenum \"Active\";\n\t\tenum \"PendingAssignment\";\n\t\tenum \"PendingCreate\";\n\t\tenum \"PendingUpdate\";\n\t\tenum \"Deleted\";\n\t}\n}\n-->",
        "comments": "",
        "outputs": 1,
        "x": 1251.1820831298828,
        "y": 425.72222805023193,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "77eb7904.f9f168"
            ]
        ]
    },
    {
        "id": "77eb7904.f9f168",
        "type": "other",
        "name": "false",
        "xml": "<outcome value='false'>",
        "comments": "",
        "outputs": 1,
        "x": 1480.5154571533203,
        "y": 426.0555410385132,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "4fba8967.330558"
            ]
        ]
    },
    {
        "id": "4fba8967.330558",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Invalid order-status'/>",
        "comments": "",
        "x": 1632.8485870361328,
        "y": 426.05560207366943,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "ea02cba4.399b88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 997.9320678710938,
        "y": 425.9722204208374,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "a2aea115.0a314",
                "6635778e.a76f48",
                "7f88cb67.0cb8a4",
                "7b46fa5d.f08144"
            ]
        ]
    },
    {
        "id": "f95d56cc.7fed28",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1514.1820678710938,
        "y": 508.4722204208374,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "640275aa.06b0bc"
            ]
        ]
    },
    {
        "id": "640275aa.06b0bc",
        "type": "set",
        "name": "set: error-message",
        "xml": "<set>\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"An error occurred while deleting generic-vnf, generic-vnf-l3-netweork or generic-vnf-vserver from GammaResource\"/>",
        "comments": "",
        "x": 1696.6820907592773,
        "y": 508.47222900390625,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "7b46fa5d.f08144",
        "type": "save",
        "name": "delete AnAI: generic-vnf",
        "xml": "<delete plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"generic-vnf\" \n\tkey=\"generic-vnf.vnf-id = $service-data.vnf-id\" \n\tlocal-only=\"false\" \n\tforce=\"true\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1211.0432662963867,
        "y": 598.2222328186035,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "4fdd37a6.2bc6e8"
            ]
        ]
    },
    {
        "id": "4fdd37a6.2bc6e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1403.0228729248047,
        "y": 598.3509359359741,
        "z": "730f50c9.364a4",
        "wires": [
            [
                "39c806b9.27c7ca"
            ]
        ]
    },
    {
        "id": "39c806b9.27c7ca",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Failed to delete generic-vnf from AnAI with vnf-id = '+ $service-data.vnf-id`\"/>",
        "comments": "",
        "x": 1561.1893997192383,
        "y": 598.4343166351318,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "532716cb.365f68",
        "type": "comment",
        "name": "NOT checking order-status intentionally",
        "info": "",
        "comments": "",
        "x": 1355.4320831298828,
        "y": 389.9722261428833,
        "z": "730f50c9.364a4",
        "wires": []
    },
    {
        "id": "5a7a473b.e0aa98",
        "type": "comment",
        "name": "Removing check for aic-cllu in 1707",
        "info": "ks220y: Confirmed with Pat Cheung, as MSO won't send aic-clli",
        "comments": "",
        "x": 798.7222595214844,
        "y": 340.0000162124634,
        "z": "730f50c9.364a4",
        "wires": []
    }
]